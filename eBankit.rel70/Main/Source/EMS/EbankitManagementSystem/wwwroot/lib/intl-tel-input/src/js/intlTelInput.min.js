function Plugin(n,t){this.telInput=$(n);this.options=$.extend({},defaults,t);this.ns="."+pluginName+id++;this.isGoodBrowser=Boolean(n.setSelectionRange);this.hadInitialPlaceholder=Boolean($(n).attr("placeholder"))}var pluginName="intlTelInput",id=1,defaults={allowDropdown:!0,autoHideDialCode:!0,autoPlaceholder:"polite",customPlaceholder:null,dropdownContainer:"",excludeCountries:[],formatOnDisplay:!0,geoIpLookup:null,hiddenInput:"",initialCountry:"",nationalMode:!0,onlyCountries:[],placeholderNumberType:"MOBILE",preferredCountries:["us","gb"],separateDialCode:!1,utilsScript:""},keys={UP:38,DOWN:40,ENTER:13,ESC:27,PLUS:43,A:65,Z:90,SPACE:32,TAB:9},regionlessNanpNumbers=["800","822","833","844","855","866","877","880","881","882","883","884","885","886","887","888","889"];$(window).on("load",function(){$.fn[pluginName].windowLoaded=!0});Plugin.prototype={_init:function(){return this.options.nationalMode&&(this.options.autoHideDialCode=!1),this.options.separateDialCode&&(this.options.autoHideDialCode=this.options.nationalMode=!1),this.isMobile=/Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.isMobile&&($("body").addClass("iti-mobile"),this.options.dropdownContainer||(this.options.dropdownContainer="body")),this.autoCountryDeferred=new $.Deferred,this.utilsScriptDeferred=new $.Deferred,this.selectedCountryData={},this._processCountryData(),this._generateMarkup(),this._setInitialState(),this._initListeners(),this._initRequests(),[this.autoCountryDeferred,this.utilsScriptDeferred]},_processCountryData:function(){this._processAllCountries();this._processCountryCodes();this._processPreferredCountries()},_addCountryCode:function(n,t,i){t in this.countryCodes||(this.countryCodes[t]=[]);var r=i||0;this.countryCodes[t][r]=n},_processAllCountries:function(){var n,t;this.options.onlyCountries.length?(n=this.options.onlyCountries.map(function(n){return n.toLowerCase()}),this.countries=allCountries.filter(function(t){return n.indexOf(t.iso2)>-1})):this.options.excludeCountries.length?(t=this.options.excludeCountries.map(function(n){return n.toLowerCase()}),this.countries=allCountries.filter(function(n){return t.indexOf(n.iso2)===-1})):this.countries=allCountries},_processCountryCodes:function(){var t,n,i;for(this.countryCodes={},t=0;t<this.countries.length;t++)if(n=this.countries[t],this._addCountryCode(n.iso2,n.dialCode,n.priority),n.areaCodes)for(i=0;i<n.areaCodes.length;i++)this._addCountryCode(n.iso2,n.dialCode+n.areaCodes[i])},_processPreferredCountries:function(){var n,i,t;for(this.preferredCountries=[],n=0;n<this.options.preferredCountries.length;n++)i=this.options.preferredCountries[n].toLowerCase(),t=this._getCountryData(i,!1,!0),t&&this.preferredCountries.push(t)},_generateMarkup:function(){var t,n;this.telInput.attr("autocomplete","off");t="intl-tel-input";this.options.allowDropdown&&(t+=" allow-dropdown");this.options.separateDialCode&&(t+=" separate-dial-code");this.telInput.wrap($("<div>",{"class":t}));this.flagsContainer=$("<div>",{"class":"flag-container"}).insertBefore(this.telInput);n=$("<div>",{"class":"selected-flag"});n.appendTo(this.flagsContainer);this.selectedFlagInner=$("<div>",{"class":"iti-flag"}).appendTo(n);this.options.separateDialCode&&(this.selectedDialCode=$("<div>",{"class":"selected-dial-code"}).appendTo(n));this.options.allowDropdown?(n.attr("tabindex","0"),$("<div>",{"class":"iti-arrow"}).appendTo(n),this.countryList=$("<ul>",{"class":"country-list hide"}),this.preferredCountries.length&&(this._appendListItems(this.preferredCountries,"preferred"),$("<li>",{"class":"divider"}).appendTo(this.countryList)),this._appendListItems(this.countries,""),this.countryListItems=this.countryList.children(".country"),this.options.dropdownContainer?this.dropdown=$("<div>",{"class":"intl-tel-input iti-container"}).append(this.countryList):this.countryList.appendTo(this.flagsContainer)):this.countryListItems=$();this.options.hiddenInput&&(this.hiddenInput=$("<input>",{type:"hidden",name:this.options.hiddenInput}).insertBefore(this.telInput))},_appendListItems:function(n,t){for(var r,i="",u=0;u<n.length;u++)r=n[u],i+="<li class='country "+t+"' data-dial-code='"+r.dialCode+"' data-country-code='"+r.iso2+"'>",i+="<div class='flag-box'><div class='iti-flag "+r.iso2+"'><\/div><\/div>",i+="<span class='country-name'>"+r.name+"<\/span>",i+="<span class='dial-code'>+"+r.dialCode+"<\/span>",i+="<\/li>";this.countryList.append(i)},_setInitialState:function(){var n=this.telInput.val();this._getDialCode(n)&&(!this._isRegionlessNanp(n)||this.options.nationalMode&&!this.options.initialCountry)?this._updateFlagFromNumber(n):this.options.initialCountry!=="auto"&&(this.options.initialCountry?this._setFlag(this.options.initialCountry.toLowerCase()):(this.defaultCountry=this.preferredCountries.length?this.preferredCountries[0].iso2:this.countries[0].iso2,n||this._setFlag(this.defaultCountry)),n||this.options.nationalMode||this.options.autoHideDialCode||this.options.separateDialCode||this.telInput.val("+"+this.selectedCountryData.dialCode));n&&this._updateValFromNumber(n)},_initListeners:function(){this._initKeyListeners();this.options.autoHideDialCode&&this._initFocusListeners();this.options.allowDropdown&&this._initDropdownListeners();this.hiddenInput&&this._initHiddenInputListener()},_initHiddenInputListener:function(){var n=this,t=this.telInput.closest("form");t.length&&t.submit(function(){n.hiddenInput.val(n.getNumber())})},_initDropdownListeners:function(){var n=this,t=this.telInput.closest("label"),i;if(t.length)t.on("click"+this.ns,function(t){n.countryList.hasClass("hide")?n.telInput.focus():t.preventDefault()});i=this.selectedFlagInner.parent();i.on("click"+this.ns,function(){!n.countryList.hasClass("hide")||n.telInput.prop("disabled")||n.telInput.prop("readonly")||n._showDropdown()});this.flagsContainer.on("keydown"+n.ns,function(t){var i=n.countryList.hasClass("hide");i&&(t.which==keys.UP||t.which==keys.DOWN||t.which==keys.SPACE||t.which==keys.ENTER)&&(t.preventDefault(),t.stopPropagation(),n._showDropdown());t.which==keys.TAB&&n._closeDropdown()})},_initRequests:function(){var n=this;if(this.options.utilsScript)if($.fn[pluginName].windowLoaded)$.fn[pluginName].loadUtils(this.options.utilsScript,this.utilsScriptDeferred);else $(window).on("load",function(){$.fn[pluginName].loadUtils(n.options.utilsScript,n.utilsScriptDeferred)});else this.utilsScriptDeferred.resolve();this.options.initialCountry==="auto"?this._loadAutoCountry():this.autoCountryDeferred.resolve()},_loadAutoCountry:function(){var n=this;$.fn[pluginName].autoCountry?this.handleAutoCountry():$.fn[pluginName].startedLoadingAutoCountry||($.fn[pluginName].startedLoadingAutoCountry=!0,typeof this.options.geoIpLookup=="function"&&this.options.geoIpLookup(function(n){$.fn[pluginName].autoCountry=n.toLowerCase();setTimeout(function(){$(".intl-tel-input input").intlTelInput("handleAutoCountry")})}))},_initKeyListeners:function(){var n=this;this.telInput.on("keyup"+this.ns,function(){n._updateFlagFromNumber(n.telInput.val())&&n._triggerCountryChange()});this.telInput.on("cut"+this.ns+" paste"+this.ns,function(){setTimeout(function(){n._updateFlagFromNumber(n.telInput.val())&&n._triggerCountryChange()})})},_cap:function(n){var t=this.telInput.attr("maxlength");return t&&n.length>t?n.substr(0,t):n},_initFocusListeners:function(){var n=this,t;this.telInput.on("mousedown"+this.ns,function(t){n.telInput.is(":focus")||n.telInput.val()||(t.preventDefault(),n.telInput.focus())});this.telInput.on("focus"+this.ns,function(){if(!n.telInput.val()&&!n.telInput.prop("readonly")&&n.selectedCountryData.dialCode){n.telInput.val("+"+n.selectedCountryData.dialCode);n.telInput.one("keypress.plus"+n.ns,function(t){t.which==keys.PLUS&&n.telInput.val("")});setTimeout(function(){var i=n.telInput[0],t;n.isGoodBrowser&&(t=n.telInput.val().length,i.setSelectionRange(t,t))})}});if(t=this.telInput.prop("form"),t)$(t).on("submit"+this.ns,function(){n._removeEmptyDialCode()});this.telInput.on("blur"+this.ns,function(){n._removeEmptyDialCode()})},_removeEmptyDialCode:function(){var t=this.telInput.val(),i=t.charAt(0)=="+",n;i&&(n=this._getNumeric(t),n&&this.selectedCountryData.dialCode!=n||this.telInput.val(""));this.telInput.off("keypress.plus"+this.ns)},_getNumeric:function(n){return n.replace(/\D/g,"")},_showDropdown:function(){this._setDropdownPosition();var n=this.countryList.children(".active");n.length&&(this._highlightListItem(n),this._scrollTo(n));this._bindDropdownListeners();this.selectedFlagInner.children(".iti-arrow").addClass("up");this.telInput.trigger("open:countrydropdown")},_setDropdownPosition:function(){var e=this,f;if(this.options.dropdownContainer&&this.dropdown.appendTo(this.options.dropdownContainer),this.dropdownHeight=this.countryList.removeClass("hide").outerHeight(),!this.isMobile){var t=this.telInput.offset(),n=t.top,i=$(window).scrollTop(),r=n+this.telInput.outerHeight()+this.dropdownHeight<i+$(window).height(),u=n-this.dropdownHeight>i;if(this.countryList.toggleClass("dropup",!r&&u),this.options.dropdownContainer){f=!r&&u?0:this.telInput.innerHeight();this.dropdown.css({top:n+f,left:t.left});$(window).on("scroll"+this.ns,function(){e._closeDropdown()})}}},_bindDropdownListeners:function(){var n=this,r,t,i;this.countryList.on("mouseover"+this.ns,".country",function(){n._highlightListItem($(this))});this.countryList.on("click"+this.ns,".country",function(){n._selectListItem($(this))});r=!0;$("html").on("click"+this.ns,function(){r||n._closeDropdown();r=!1});t="";i=null;$(document).on("keydown"+this.ns,function(r){r.preventDefault();r.which==keys.UP||r.which==keys.DOWN?n._handleUpDownKey(r.which):r.which==keys.ENTER?n._handleEnterKey():r.which==keys.ESC?n._closeDropdown():(r.which>=keys.A&&r.which<=keys.Z||r.which==keys.SPACE)&&(i&&clearTimeout(i),t+=String.fromCharCode(r.which),n._searchForCountry(t),i=setTimeout(function(){t=""},1e3))})},_handleUpDownKey:function(n){var i=this.countryList.children(".highlight").first(),t=n==keys.UP?i.prev():i.next();t.length&&(t.hasClass("divider")&&(t=n==keys.UP?t.prev():t.next()),this._highlightListItem(t),this._scrollTo(t))},_handleEnterKey:function(){var n=this.countryList.children(".highlight").first();n.length&&this._selectListItem(n)},_searchForCountry:function(n){for(var i,t=0;t<this.countries.length;t++)if(this._startsWith(this.countries[t].name,n)){i=this.countryList.children("[data-country-code="+this.countries[t].iso2+"]").not(".preferred");this._highlightListItem(i);this._scrollTo(i,!0);break}},_startsWith:function(n,t){return n.substr(0,t.length).toUpperCase()==t},_updateValFromNumber:function(n){if(this.options.formatOnDisplay&&window.intlTelInputUtils&&this.selectedCountryData){var t=!this.options.separateDialCode&&(this.options.nationalMode||n.charAt(0)!="+")?intlTelInputUtils.numberFormat.NATIONAL:intlTelInputUtils.numberFormat.INTERNATIONAL;n=intlTelInputUtils.formatNumber(n,this.selectedCountryData.iso2,t)}n=this._beforeSetNumber(n);this.telInput.val(n)},_updateFlagFromNumber:function(n){var i;n&&this.options.nationalMode&&this.selectedCountryData.dialCode=="1"&&n.charAt(0)!="+"&&(n.charAt(0)!="1"&&(n="1"+n),n="+"+n);var u=this._getDialCode(n),t=null,f=this._getNumeric(n);if(u){var r=this.countryCodes[this._getNumeric(u)],e=$.inArray(this.selectedCountryData.iso2,r)>-1,o=u=="+1"&&f.length>=4,s=this.selectedCountryData.dialCode=="1";if(!(s&&this._isRegionlessNanp(f))&&(!e||o))for(i=0;i<r.length;i++)if(r[i]){t=r[i];break}}else n.charAt(0)=="+"&&f.length?t="":n&&n!="+"||(t=this.defaultCountry);return t!==null?this._setFlag(t):!1},_isRegionlessNanp:function(n){var t=this._getNumeric(n),i;return t.charAt(0)=="1"?(i=t.substr(1,3),$.inArray(i,regionlessNanpNumbers)>-1):!1},_highlightListItem:function(n){this.countryListItems.removeClass("highlight");n.addClass("highlight")},_getCountryData:function(n,t,i){for(var u=t?allCountries:this.countries,r=0;r<u.length;r++)if(u[r].iso2==n)return u[r];if(i)return null;throw new Error("No country data for '"+n+"'");},_setFlag:function(n){var i=this.selectedCountryData.iso2?this.selectedCountryData:{},u,t,r;return this.selectedCountryData=n?this._getCountryData(n,!1,!1):{},this.selectedCountryData.iso2&&(this.defaultCountry=this.selectedCountryData.iso2),this.selectedFlagInner.attr("class","iti-flag "+n),u=n?this.selectedCountryData.name+": +"+this.selectedCountryData.dialCode:"Unknown",this.selectedFlagInner.parent().attr("title",u),this.options.separateDialCode&&(t=this.selectedCountryData.dialCode?"+"+this.selectedCountryData.dialCode:"",r=this.telInput.parent(),i.dialCode&&r.removeClass("iti-sdc-"+(i.dialCode.length+1)),t&&r.addClass("iti-sdc-"+t.length),this.selectedDialCode.text(t)),this._updatePlaceholder(),this.countryListItems.removeClass("active"),n&&this.countryListItems.find(".iti-flag."+n).first().closest(".country").addClass("active"),i.iso2!==n},_updatePlaceholder:function(){var i=this.options.autoPlaceholder==="aggressive"||!this.hadInitialPlaceholder&&(this.options.autoPlaceholder===!0||this.options.autoPlaceholder==="polite"),t,n;window.intlTelInputUtils&&i&&(t=intlTelInputUtils.numberType[this.options.placeholderNumberType],n=this.selectedCountryData.iso2?intlTelInputUtils.getExampleNumber(this.selectedCountryData.iso2,this.options.nationalMode,t):"",n=this._beforeSetNumber(n),typeof this.options.customPlaceholder=="function"&&(n=this.options.customPlaceholder(n,this.selectedCountryData)),this.telInput.attr("placeholder",n))},_selectListItem:function(n){var i=this._setFlag(n.attr("data-country-code")),t;this._closeDropdown();this._updateDialCode(n.attr("data-dial-code"),!0);this.telInput.focus();this.isGoodBrowser&&(t=this.telInput.val().length,this.telInput[0].setSelectionRange(t,t));i&&this._triggerCountryChange()},_closeDropdown:function(){this.countryList.addClass("hide");this.selectedFlagInner.children(".iti-arrow").removeClass("up");$(document).off(this.ns);$("html").off(this.ns);this.countryList.off(this.ns);this.options.dropdownContainer&&(this.isMobile||$(window).off("scroll"+this.ns),this.dropdown.detach());this.telInput.trigger("close:countrydropdown")},_scrollTo:function(n,t){var i=this.countryList,u=i.height(),f=i.offset().top,c=f+u,e=n.outerHeight(),o=n.offset().top,l=o+e,r=o-f+i.scrollTop(),s=u/2-e/2,h;o<f?(t&&(r-=s),i.scrollTop(r)):l>c&&(t&&(r+=s),h=u-e,i.scrollTop(r-h))},_updateDialCode:function(n,t){var i=this.telInput.val(),r,u;if(n="+"+n,i.charAt(0)=="+")u=this._getDialCode(i),r=u?i.replace(u,n):n;else{if(this.options.nationalMode||this.options.separateDialCode)return;if(i)r=n+i;else if(t||!this.options.autoHideDialCode)r=n;else return}this.telInput.val(r)},_getDialCode:function(n){var u="",i,t,r;if(n.charAt(0)=="+")for(i="",t=0;t<n.length;t++)if(r=n.charAt(t),$.isNumeric(r)&&(i+=r,this.countryCodes[i]&&(u=n.substr(0,t+1)),i.length==4))break;return u},_getFullNumber:function(){var t=$.trim(this.telInput.val()),n=this.selectedCountryData.dialCode,r,i=this._getNumeric(t),u=i.charAt(0)=="1"?i:"1"+i;return r=this.options.separateDialCode?"+"+n:t.charAt(0)!="+"&&t.charAt(0)!="1"&&n&&n.charAt(0)=="1"&&n.length==4&&n!=u.substr(0,4)?n.substr(1):"",r+t},_beforeSetNumber:function(n){var t,i;return this.options.separateDialCode&&(t=this._getDialCode(n),t&&(this.selectedCountryData.areaCodes!==null&&(t="+"+this.selectedCountryData.dialCode),i=n[t.length]===" "||n[t.length]==="-"?t.length+1:t.length,n=n.substr(i))),this._cap(n)},_triggerCountryChange:function(){this.telInput.trigger("countrychange",this.selectedCountryData)},handleAutoCountry:function(){this.options.initialCountry==="auto"&&(this.defaultCountry=$.fn[pluginName].autoCountry,this.telInput.val()||this.setCountry(this.defaultCountry),this.autoCountryDeferred.resolve())},handleUtils:function(){window.intlTelInputUtils&&(this.telInput.val()&&this._updateValFromNumber(this.telInput.val()),this._updatePlaceholder());this.utilsScriptDeferred.resolve()},destroy:function(){var n,t;this.allowDropdown&&(this._closeDropdown(),this.selectedFlagInner.parent().off(this.ns),this.telInput.closest("label").off(this.ns));this.options.autoHideDialCode&&(n=this.telInput.prop("form"),n&&$(n).off(this.ns));this.telInput.off(this.ns);t=this.telInput.parent();t.before(this.telInput).remove()},getExtension:function(){return window.intlTelInputUtils?intlTelInputUtils.getExtension(this._getFullNumber(),this.selectedCountryData.iso2):""},getNumber:function(n){return window.intlTelInputUtils?intlTelInputUtils.formatNumber(this._getFullNumber(),this.selectedCountryData.iso2,n):""},getNumberType:function(){return window.intlTelInputUtils?intlTelInputUtils.getNumberType(this._getFullNumber(),this.selectedCountryData.iso2):-99},getSelectedCountryData:function(){return this.selectedCountryData},getValidationError:function(){return window.intlTelInputUtils?intlTelInputUtils.getValidationError(this._getFullNumber(),this.selectedCountryData.iso2):-99},isValidNumber:function(){var n=$.trim(this._getFullNumber()),t=this.options.nationalMode?this.selectedCountryData.iso2:"";return window.intlTelInputUtils?intlTelInputUtils.isValidNumber(n,t):null},setCountry:function(n){n=n.toLowerCase();this.selectedFlagInner.hasClass(n)||(this._setFlag(n),this._updateDialCode(this.selectedCountryData.dialCode,!1),this._triggerCountryChange())},setNumber:function(n){var t=this._updateFlagFromNumber(n);this._updateValFromNumber(n);t&&this._triggerCountryChange()},setPlaceholderNumberType:function(n){this.options.placeholderNumberType=n;this._updatePlaceholder()}};$.fn[pluginName]=function(n){var r=arguments,t,i;return n===undefined||typeof n=="object"?(t=[],this.each(function(){if(!$.data(this,"plugin_"+pluginName)){var i=new Plugin(this,n),r=i._init();t.push(r[0]);t.push(r[1]);$.data(this,"plugin_"+pluginName,i)}}),$.when.apply(null,t)):typeof n=="string"&&n[0]!=="_"?(this.each(function(){var t=$.data(this,"plugin_"+pluginName);t instanceof Plugin&&typeof t[n]=="function"&&(i=t[n].apply(t,Array.prototype.slice.call(r,1)));n==="destroy"&&$.data(this,"plugin_"+pluginName,null)}),i!==undefined?i:this):void 0};$.fn[pluginName].getCountryData=function(){return allCountries};$.fn[pluginName].loadUtils=function(n,t){$.fn[pluginName].loadedUtilsScript?t&&t.resolve():($.fn[pluginName].loadedUtilsScript=!0,$.ajax({type:"GET",url:n,complete:function(){$(".intl-tel-input input").intlTelInput("handleUtils")},dataType:"script",cache:!0}))};$.fn[pluginName].defaults=defaults;