function configAccessibility(n){$(n).keyup(function(n){(n.keyCode===32||n.keyCode===13)&&($(this).find(".checkbox").trigger("click"),$(this).find("a").focus(),$(this).find("a").focus(),$(this).find("a").focus())})}(function(n,t){typeof define=="function"&&define.amd&&typeof require=="function"&&typeof require.specified=="function"&&require.specified("knockout")?define(["jquery","knockout"],t):t(n.jQuery,n.ko)})(this,function(n,t){"use strict";function r(n,t){for(var i=0;i<n.length;++i)t(n[i],i)}function i(t,i){this.$select=n(t);this.options=this.mergeOptions(n.extend({},i,this.$select.data()));this.options.nonSelectedText=top.eBankit.Presentation.GetResource("MSNoneSelected");this.$select.attr("data-placeholder")&&(this.options.nonSelectedText=this.$select.data("placeholder"));this.originalOptions=this.$select.clone()[0].options;this.query="";this.searchTimeout=null;this.lastToggledInput=null;this.options.multiple=this.$select.attr("multiple")==="multiple";this.options.onChange=n.proxy(this.options.onChange,this);this.options.onSelectAll=n.proxy(this.options.onSelectAll,this);this.options.onDeselectAll=n.proxy(this.options.onDeselectAll,this);this.options.onDropdownShow=n.proxy(this.options.onDropdownShow,this);this.options.onDropdownHide=n.proxy(this.options.onDropdownHide,this);this.options.onDropdownShown=n.proxy(this.options.onDropdownShown,this);this.options.onDropdownHidden=n.proxy(this.options.onDropdownHidden,this);this.options.onInitialized=n.proxy(this.options.onInitialized,this);this.options.onFiltering=n.proxy(this.options.onFiltering,this);this.buildContainer();this.buildButton();this.buildDropdown();this.buildReset();this.buildSelectAll();this.buildDropdownOptions();this.buildFilter();this.updateSelectAll(!0);this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups();this.options.wasDisabled=this.$select.prop("disabled");this.options.disableIfEmpty&&n("option",this.$select).length<=0&&this.disable();this.$select.wrap('<span class="multiselect-native-select" />').after(this.$container);this.options.onInitialized(this.$select,this.$container);this.updateButtonText();configAccessibility(n("#"+this.$select.attr("id")).parent().find("ul.multiselect-container li"))}typeof t!="undefined"&&t.bindingHandlers&&!t.bindingHandlers.multiselect&&(t.bindingHandlers.multiselect={after:["options","value","selectedOptions","enable","disable"],init:function(i,r,u){var f=n(i),a=t.toJS(r()),h,c,l,e,o,s;f.multiselect(a);u.has("options")&&(h=u.get("options"),t.isObservable(h)&&t.computed({read:function(){h();setTimeout(function(){var n=f.data("multiselect");n&&n.updateOriginalOptions();f.multiselect("rebuild")},1)},disposeWhenNodeIsRemoved:i}));u.has("value")&&(c=u.get("value"),t.isObservable(c)&&t.computed({read:function(){c();setTimeout(function(){f.multiselect("refresh")},1)},disposeWhenNodeIsRemoved:i}).extend({rateLimit:100,notifyWhenChangesStop:!0}));u.has("selectedOptions")&&(l=u.get("selectedOptions"),t.isObservable(l)&&t.computed({read:function(){l();setTimeout(function(){f.multiselect("refresh")},1)},disposeWhenNodeIsRemoved:i}).extend({rateLimit:100,notifyWhenChangesStop:!0}));e=function(n){setTimeout(function(){n?f.multiselect("enable"):f.multiselect("disable")})};u.has("enable")&&(o=u.get("enable"),t.isObservable(o)?t.computed({read:function(){e(o())},disposeWhenNodeIsRemoved:i}).extend({rateLimit:100,notifyWhenChangesStop:!0}):e(o));u.has("disable")&&(s=u.get("disable"),t.isObservable(s)?t.computed({read:function(){e(!s())},disposeWhenNodeIsRemoved:i}).extend({rateLimit:100,notifyWhenChangesStop:!0}):e(!s));t.utils.domNodeDisposal.addDisposeCallback(i,function(){f.multiselect("destroy")})},update:function(i,r){var u=n(i),f=t.toJS(r());u.multiselect("setOptions",f);u.multiselect("rebuild")}});i.prototype={defaults:{buttonText:function(t,i){return this.disabledText.length>0&&(i.prop("disabled")||t.length==0&&this.disableIfEmpty)?this.disabledText:t.length===0?this.nonSelectedText:t.length===n("option",n(i)).length&&n("option",n(i)).length!==1&&this.multiple?top.eBankit.Presentation.GetResource("MSAll"):t.length>1?t.filter(function(n,i){return i.value===t[0].value}).length!=t.length?top.eBankit.Presentation.GetResource("MSMultiple"):n(t[0]).attr("label")!==undefined?n(t[0]).attr("label"):n(t[0]).text():n(t).attr("label")!==undefined?n(t).attr("label"):n(t).text()},buttonTitle:function(t,i){return this.disabledText.length>0&&(i.prop("disabled")||t.length==0&&this.disableIfEmpty)?this.disabledText:t.length===0?this.nonSelectedText:t.length===n("option",n(i)).length&&n("option",n(i)).length!==1&&this.multiple?top.eBankit.Presentation.GetResource("MSAll"):t.length>1?t.filter(function(n,i){return i.value===t[0].value}).length!=t.length?top.eBankit.Presentation.GetResource("MSMultiple"):n(t[0]).attr("label")!==undefined?n(t[0]).attr("label"):n(t[0]).text():n(t).attr("label")!==undefined?n(t).attr("label"):n(t).text()},checkboxName:function(){return!1},optionLabel:function(t){return n(t).attr("label")||n(t).text()},optionClass:function(t){return n(t).attr("class")||""},onChange:function(){},onDropdownShow:function(){this.options.enableFiltering&&(n(".multiselect-search").focus(),this.$filter.show())},onDropdownHide:function(){this.$filter.hide()},onDropdownShown:function(){this.$ul.scrollTop(0)},onDropdownHidden:function(){},onSelectAll:function(){},onDeselectAll:function(){},onInitialized:function(){},onFiltering:function(){},enableHTML:!0,buttonClass:"btn btn-default",inheritClass:!0,buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',dropRight:!1,dropUp:!1,selectedClass:"active",maxHeight:400,uniqueId:Math.floor(Math.random()*100+1),includeSelectAllOption:!0,includeSelectAllIfMoreThan:0,selectAllText:top.eBankit.Presentation.GetResource("MSAll"),selectAllValue:"multiselect-all",selectAllName:!1,selectAllNumber:!0,selectAllJustVisible:!0,enableFiltering:!0,enableCaseInsensitiveFiltering:!0,enableFullValueFiltering:!1,enableClickableOptGroups:!0,enableCollapsibleOptGroups:!1,collapseOptGroupsByDefault:!1,filterPlaceholder:top.eBankit.Presentation.GetResource("MSSearchPlaceHolder"),filterBehavior:"text",includeFilterClearBtn:!0,preventInputChangeEvent:!1,nonSelectedText:top.eBankit.Presentation.GetResource("MSNoneSelected"),nSelectedText:"selected",allSelectedText:"",numberDisplayed:3,disableIfEmpty:!1,disabledText:"",delimiterText:", ",includeResetOption:!1,includeResetDivider:!1,resetText:"Reset",templates:{button:'<button type="button" class="multiselect dropdown-toggle" data-toggle="dropdown" data-toggle-second="tooltip" data-placement="top" title="{{tooltip-value}}"><span class="multiselect-selected-text"><\/span> <b class="ebk-selector-dropdown"><\/b><\/button>',ul:'<ul class="multiselect-container dropdown-menu"><\/ul>',filter:'<div id="multiselect-filter" class="multiselect-input-group-filter"><input class="form-control multiselect-search" type="text"><\/div>',filterClearBtn:"",li:'<li><a href="javascript:void(0);"><div class="pull-left">       <div class="checkbox-blue">          <label>              <input type="checkbox">              <span class="box-check"><\/span>          <\/label>      <\/div>  <\/div>  <span class="checkbox-label"><label plugin-label="true"><\/label><\/span><\/a><\/li>',divider:'<li class="multiselect-item divider"><\/li>',liGroup:'<li class="multiselect-item multiselect-group"><a href="javascript:void(0);"><div class="pull-left">       <div class="checkbox-blue">          <label>              <input type="checkbox">              <span class="box-check"><\/span>          <\/label>      <\/div>  <\/div>  <span class="checkbox-label"><label plugin-label="true"><b><\/b><\/label><\/span><\/a><\/li>',resetButton:'<li class="multiselect-reset text-center"><div class="input-group"><a class="btn btn-default btn-block"><\/a><\/div><\/li>'}},constructor:i,buildContainer:function(){this.$container=n(this.options.buttonContainer);this.$container.on("show.bs.dropdown",this.options.onDropdownShow);this.$container.on("hide.bs.dropdown",this.options.onDropdownHide);this.$container.on("shown.bs.dropdown",this.options.onDropdownShown);this.$container.on("hidden.bs.dropdown",this.options.onDropdownHidden)},buildButton:function(){this.$button=n(this.options.templates.button).addClass(this.options.buttonClass);this.$button.attr("title",this.options.buttonTitle(this.options,this.$select));this.$select.attr("class")&&this.options.inheritClass&&this.$button.addClass(this.$select.attr("class"));this.$select.prop("disabled")?this.disable():this.enable();this.options.buttonWidth&&this.options.buttonWidth!=="auto"&&(this.$button.css({width:"100%",overflow:"hidden","text-overflow":"ellipsis"}),this.$container.css({width:this.options.buttonWidth}));var t=this.$select.attr("tabindex");t&&this.$button.attr("tabindex",t);this.$container.prepend(this.$button)},buildDropdown:function(){if(this.$ul=n(this.options.templates.ul),this.options.dropRight&&this.$ul.addClass("pull-right"),this.options.maxHeight&&this.$ul.css({"max-height":this.options.maxHeight+"px","overflow-y":"auto","overflow-x":"hidden"}),this.options.dropUp){var t=Math.min(this.options.maxHeight,n('option[data-role!="divider"]',this.$select).length*26+n('option[data-role="divider"]',this.$select).length*19+(this.options.includeSelectAllOption?26:0)+(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering?44:0)),i=t+34;this.$ul.css({"max-height":t+"px","overflow-y":"auto","overflow-x":"hidden","margin-top":"-"+i+"px"})}this.$container.append(this.$ul)},buildDropdownOptions:function(){this.$select.children().each(n.proxy(function(t,i){var r=n(i),u=r.prop("tagName").toLowerCase();r.prop("value")!==this.options.selectAllValue&&(u==="optgroup"?this.createOptgroup(i):u==="option"&&(r.data("role")==="divider"?this.createDivider():this.createOptionValue(i)))},this));n(this.$ul).off("change",'li:not(.multiselect-group) input[type="checkbox"], li:not(.multiselect-group) input[type="radio"]');n(this.$ul).on("change",'li:not(.multiselect-group) input[type="checkbox"], li:not(.multiselect-group) input[type="radio"]',n.proxy(function(t){var i=n(t.target).closest("li").find(".checkbox-label input"),u=i.closest("ul").find('.checkbox-label input[value="'+i.val()+'"]'),r=!i.closest("li").hasClass("active"),o=i.val()===this.options.selectAllValue,e;this.options.selectedClass&&(r?u.closest("li").addClass(this.options.selectedClass):u.closest("li").removeClass(this.options.selectedClass));r=i.closest("li").hasClass("active");r?u.closest("li").find('.checkbox-blue input[type="checkbox"]').prop("checked",!0):u.closest("li").find('.checkbox-blue input[type="checkbox"]').prop("checked",!1);var c=i.val(),f=this.getOptionByValue(c),s=n("option",this.$select).not(f),h=n("input",this.$container).not(i);if(o)r?this.selectAll(this.options.selectAllJustVisible,!0):this.deselectAll(this.options.selectAllJustVisible,!0);else{r?(f.prop("selected",!0),this.options.multiple?(f.prop("selected",!0),u.prop("checked",!0),i.closest("li").find('.checkbox-blue input[type="checkbox"]').prop("checked",!0)):(this.options.selectedClass&&n(h).closest("li").removeClass(this.options.selectedClass),n(h).prop("checked",!1),s.prop("selected",!1),this.$button.click()),this.options.selectedClass==="active"&&s.closest("a").css("outline","")):(f.prop("selected",!1),u.prop("checked",!1),i.closest("li").find('.checkbox-blue input[type="checkbox"]').prop("checked",!1));this.options.onChange(f,r);this.updateSelectAll();this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()}if(this.$select.change(),this.updateButtonText(),this.options.preventInputChangeEvent)return!1;o&&(e=this.$container.closest(".form-group").next('input[type="hidden"]'),r?e.val("-1"):e.val(""))},this));n("li a",this.$ul).on("mousedown",function(n){if(n.shiftKey)return!1});n(this.$ul).on("touchstart click","li a",n.proxy(function(t){var i,e,u,r,s,f,o,h,c,l;if(t.stopPropagation(),i=n(t.target),t.shiftKey&&this.options.multiple){if(i.is("label")&&(t.preventDefault(),i=i.find("input"),i.prop("checked",!i.prop("checked"))),e=i.prop("checked")||!1,this.lastToggledInput!==null&&this.lastToggledInput!==i)for(u=this.$ul.find("li:visible").index(i.parents("li")),r=this.$ul.find("li:visible").index(this.lastToggledInput.parents("li")),u>r&&(s=r,r=u,u=s),++r,f=this.$ul.find("li").not(".multiselect-filter-hidden").slice(u,r).find("input"),f.prop("checked",e),this.options.selectedClass&&f.closest("li").toggleClass(this.options.selectedClass,e),o=0,h=f.length;o<h;o++)c=n(f[o]),l=this.getOptionByValue(c.val()),l.prop("selected",e);i.trigger("change")}i.is("input")&&!i.closest("li").is(".multiselect-item")&&(this.lastToggledInput=i);i.blur()},this));this.$container.off("keydown.multiselect").on("keydown.multiselect",n.proxy(function(t){var r,i,f,u;if(!n('input[type="text"]',this.$container).is(":focus"))if(t.keyCode===9&&this.$container.hasClass("open"))this.$button.click();else{if(r=n(this.$container).find("li:not(.divider):not(.disabled) a").filter(":visible"),!r.length)return;i=r.index(r.filter(":focus"));t.keyCode===38&&i>0?i--:t.keyCode===40&&i<r.length-1?i++:~i||(i=0);f=r.eq(i);f.focus();(t.keyCode===32||t.keyCode===13)&&(u=f.find("input"),u.prop("checked",!u.prop("checked")),u.change());t.stopPropagation();t.preventDefault()}},this));if(this.options.enableClickableOptGroups&&this.options.multiple)n("li.multiselect-group input",this.$ul).on("change",n.proxy(function(t){t.stopPropagation();var f=n(t.target),r=f.prop("checked")||!1,i=n(t.target).closest("li"),e=i.nextUntil("li.multiselect-group").not(".multiselect-filter-hidden").not(".disabled");r?i.find('.checkbox-blue input[type="checkbox"]').prop("checked",!0):i.find('.checkbox-blue input[type="checkbox"]').prop("checked",!1);var o=e.find(".checkbox-label input"),u=[];this.options.selectedClass&&(r?i.addClass(this.options.selectedClass):i.removeClass(this.options.selectedClass));n.each(o,n.proxy(function(t,i){var e=n(i).val(),f=n(i).closest("ul").find('.checkbox-label input[value="'+e+'"]'),o=this.getOptionByValue(e),s;r?(f.prop("checked",!0),f.closest("li").addClass(this.options.selectedClass),f.closest("li").find('.checkbox-blue input[type="checkbox"]').prop("checked",!0),s=n(i).closest("li"),s.closest('input[type="checkbox"]').prop("checked",!0),o.prop("selected",!0)):(f.prop("checked",!1),f.closest("li").removeClass(this.options.selectedClass),f.closest("li").find('.checkbox-blue input[type="checkbox"]').prop("checked",!1),o.prop("selected",!1));u.push(this.getOptionByValue(e))},this));this.options.onChange(u,r);this.$select.change();this.updateButtonText();this.updateSelectAll()},this));if(this.options.enableCollapsibleOptGroups&&this.options.multiple){n("li.multiselect-group .caret-container",this.$ul).on("click",n.proxy(function(t){var u=n(t.target).closest("li"),i=u.nextUntil("li.multiselect-group").not(".multiselect-filter-hidden"),r=!0;i.each(function(){r=r&&!n(this).hasClass("multiselect-collapsible-hidden")});r?i.hide().addClass("multiselect-collapsible-hidden"):i.show().removeClass("multiselect-collapsible-hidden")},this));n("li.multiselect-all",this.$ul).css("background","#f3f3f3").css("border-bottom","1px solid #eaeaea");n("li.multiselect-all > a > label.checkbox",this.$ul).css("padding","3px 20px 3px 35px");n("li.multiselect-group > a > input",this.$ul).css("margin","4px 0px 5px -20px")}},createOptionValue:function(t){var r=n(t),u=n(this.options.templates.li),i,o,s;r.is(":selected")&&(r.prop("selected",!0),u.find(".checkbox-blue input").prop("checked",!0));var e=this.options.optionLabel(t),l=this.options.optionClass(t),h=r.val(),c=this.options.multiple?"checkbox":"radio",f=n('label[plugin-label="true"]',u);f.addClass(c);f.attr("title",e);u.addClass(l);this.options.collapseOptGroupsByDefault&&n(t).parent().prop("tagName").toLowerCase()==="optgroup"&&(u.addClass("multiselect-collapsible-hidden"),u.hide());this.options.enableHTML?f.html(" "+e):f.text(" "+e);i=n("<input/>").attr("type",c);o=this.options.checkboxName(r);o&&i.attr("name",o);f.prepend(i);s=r.prop("selected")||!1;i.val(h);h===this.options.selectAllValue&&(u.addClass("multiselect-item multiselect-all"),i.parent().parent().addClass("multiselect-all"));f.attr("title",r.attr("title"));this.$ul.append(u);r.is(":disabled")&&i.attr("disabled","disabled").prop("disabled",!0).closest("a").attr("tabindex","-1").closest("li").addClass("disabled");i.prop("checked",s);s&&this.options.selectedClass&&i.closest("li").addClass(this.options.selectedClass)},createDivider:function(){var t=n(this.options.templates.divider);this.$ul.append(t)},createOptgroup:function(t){var r=n(t).attr("label"),u=n(t).attr("value"),i=n(this.options.templates.liGroup),f=this.options.optionClass(t);i.addClass(f);this.options.enableHTML?n('label[plugin-label="true"] b',i).html(" "+r):n('label[plugin-label="true"] b',i).text(" "+r);this.options.enableCollapsibleOptGroups&&this.options.multiple&&n("a",i).append('<span class="caret-container"><b class="caret"><\/b><\/span>');this.options.enableClickableOptGroups&&this.options.multiple&&n('a label[plugin-label="true"]',i).prepend('<input type="checkbox" value="'+(u!=undefined?u:r)+'"/>');n(t).is(":disabled")&&i.addClass("disabled");this.$ul.append(i);n("option",t).each(n.proxy(function(n,t){this.createOptionValue(t)},this))},buildReset:function(){if(this.options.includeResetOption){this.options.includeResetDivider&&this.$ul.prepend(n(this.options.templates.divider));var t=n(this.options.templates.resetButton);this.options.enableHTML?n("a",t).html(this.options.resetText):n("a",t).text(this.options.resetText);n("a",t).click(n.proxy(function(){this.clearSelection()},this));this.$ul.prepend(t)}},buildSelectAll:function(){var u,r,t,i;typeof this.options.selectAllValue=="number"&&(this.options.selectAllValue=this.options.selectAllValue.toString());u=this.hasSelectAll();!u&&this.options.includeSelectAllOption&&this.options.multiple&&n("option",this.$select).length>this.options.includeSelectAllIfMoreThan&&(this.options.includeSelectAllDivider&&this.$ul.prepend(n(this.options.templates.divider)),r=top.eBankit.Presentation.GetResource("MSAll"),t=n(this.options.templates.li),n('label[plugin-label="true"]',t).addClass("checkbox"),this.options.enableHTML?n('label[plugin-label="true"]',t).html(" "+r):n('label[plugin-label="true"]',t).text(" "+r),this.options.selectAllName?n('label[plugin-label="true"]',t).prepend('<input type="checkbox" name="'+this.options.selectAllName+'" />'):n('label[plugin-label="true"]',t).prepend('<input type="checkbox" />'),i=n("input",t),i.val(this.options.selectAllValue),t.addClass("multiselect-item multiselect-all"),i.parent().parent().addClass("multiselect-all"),this.$ul.prepend(t),i.prop("checked",!1))},buildFilter:function(){var i,t;if(this.options.filterPlaceholder=top.eBankit.Presentation.GetResource("MSSearchPlaceHolder"),(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering)&&(i=Math.max(this.options.enableFiltering,this.options.enableCaseInsensitiveFiltering),this.$select.find("option").length>=i)){if(this.$filter=n(this.options.templates.filter),n("input",this.$filter).attr("placeholder",this.options.filterPlaceholder),this.options.includeFilterClearBtn){t=n(this.options.templates.filterClearBtn);t.on("click",n.proxy(function(){clearTimeout(this.searchTimeout);this.query="";this.$filter.find(".multiselect-search").val("");n("li",this.$ul).show().removeClass("multiselect-filter-hidden");this.updateSelectAll();this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},this));this.$filter.find(".input-group").append(t)}this.$container.prepend(this.$filter);this.$filter.hide();this.$filter.val(this.query).on("click",function(n){n.stopPropagation()}).on("input keydown",n.proxy(function(t){t.which===13&&t.preventDefault();clearTimeout(this.searchTimeout);this.searchTimeout=this.asyncFunction(n.proxy(function(){if(this.query!==t.target.value){this.query=t.target.value;var i,r,u=0;n.each(n("li",this.$ul),n.proxy(function(t,f){var s=n(".checkbox-label input",f).length>0?n(".checkbox-label input",f).val():"",h=n(".checkbox-label label",f).text(),o="",e,c;this.options.filterBehavior==="text"?o=h:this.options.filterBehavior==="value"?o=s:this.options.filterBehavior==="both"&&(o=h+"\n"+s);s!==this.options.selectAllValue&&h&&(e=!1,this.options.enableCaseInsensitiveFiltering&&(o=o.toLowerCase(),this.query=this.query.toLowerCase()),this.options.enableFullValueFiltering&&this.options.filterBehavior!=="both"?(c=o.trim().substring(0,this.query.length),this.query.indexOf(c)>-1&&(e=!0)):o.indexOf(this.query)>-1&&(e=!0),e||(n(f).css("display","none"),n(f).addClass("multiselect-filter-hidden")),e&&(n(f).css("display","block"),n(f).removeClass("multiselect-filter-hidden"),u+=1),n(f).hasClass("multiselect-group")?(i=f,r=e):(e&&n(i).show().removeClass("multiselect-filter-hidden"),!e&&r&&n(f).show().removeClass("multiselect-filter-hidden")))},this))}this.updateSelectAll();this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups();this.options.onFiltering(t.target);u==0?this.$ul.find(".multiselect-item.multiselect-all").hide():this.$ul.find(".multiselect-item.multiselect-all").show()},this),300,this)},this))}},destroy:function(){this.$container.remove();this.$select.show();this.$select.prop("disabled",this.options.wasDisabled);this.$select.data("multiselect",null)},refresh:function(){var t={};n("li input",this.$ul).each(function(){t[n(this).val()]=n(this)});n("option",this.$select).each(n.proxy(function(i,r){var f=n(r),u=t[n(r).val()];f.is(":selected")?(u.prop("checked",!0),this.options.selectedClass&&u.closest("li").addClass(this.options.selectedClass)):(u.prop("checked",!1),this.options.selectedClass&&u.closest("li").removeClass(this.options.selectedClass));f.is(":disabled")?u.attr("disabled","disabled").prop("disabled",!0).closest("li").addClass("disabled"):u.prop("disabled",!1).closest("li").removeClass("disabled")},this));this.updateButtonText();this.updateSelectAll();this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},select:function(t,i){var u,r,f,e;for(n.isArray(t)||(t=[t]),u=0;u<t.length;u++)if((r=t[u],r!==null&&r!==undefined)&&(f=this.getOptionByValue(r),e=this.getInputByValue(r),f!==undefined&&e!==undefined)&&(this.options.multiple||this.deselectAll(!1),this.options.selectedClass&&e.closest("li").addClass(this.options.selectedClass),e.prop("checked",!0),f.prop("selected",!0),i))this.options.onChange(f,!0);this.updateButtonText();this.updateSelectAll();this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},clearSelection:function(){this.deselectAll(!1);this.updateButtonText();this.updateSelectAll();this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},deselect:function(t,i){var u,r,f,e;for(n.isArray(t)||(t=[t]),u=0;u<t.length;u++)if((r=t[u],r!==null&&r!==undefined)&&(f=this.getOptionByValue(r),e=this.getInputByValue(r),f!==undefined&&e!==undefined)&&(this.options.selectedClass&&e.closest("li").removeClass(this.options.selectedClass),e.prop("checked",!1),f.prop("selected",!1),i))this.options.onChange(f,!1);this.updateButtonText();this.updateSelectAll();this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups()},selectAll:function(t,i){var t=typeof t=="undefined"?!0:t,r=n("li:not(.divider):not(.disabled):not(.multiselect-group)",this.$ul),u=n("li:not(.divider):not(.disabled):not(.multiselect-group):not(.multiselect-filter-hidden):not(.multiselect-collapisble-hidden)",this.$ul).filter(":visible"),f;t?(n("input:enabled",u).prop("checked",!0),u.addClass(this.options.selectedClass),n("input:enabled",u).each(n.proxy(function(t,i){var r=n(i).val(),u=this.getOptionByValue(r);n(u).prop("selected",!0)},this))):(n("input:enabled",r).prop("checked",!0),r.addClass(this.options.selectedClass),n("input:enabled",r).each(n.proxy(function(t,i){var r=n(i).val(),u=this.getOptionByValue(r);n(u).prop("selected",!0)},this)),f=this.$container.closest(".form-group").next('input[type="hidden"]'),f.val(""));n('li input[value="'+this.options.selectAllValue+'"]',this.$ul).prop("checked",!0);this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups();i&&this.options.onSelectAll()},deselectAll:function(t,i){var t=typeof t=="undefined"?!0:t,r=n("li:not(.divider):not(.disabled):not(.multiselect-group)",this.$ul),u=n("li:not(.divider):not(.disabled):not(.multiselect-group):not(.multiselect-filter-hidden):not(.multiselect-collapisble-hidden)",this.$ul).filter(":visible");t?(n('input[type="checkbox"]:enabled',u).prop("checked",!1),u.removeClass(this.options.selectedClass),n('input[type="checkbox"]:enabled',u).each(n.proxy(function(t,i){var r=n(i).val(),u=this.getOptionByValue(r);n(u).prop("selected",!1)},this))):(n('input[type="checkbox"]:enabled',r).prop("checked",!1),r.removeClass(this.options.selectedClass),n('input[type="checkbox"]:enabled',r).each(n.proxy(function(t,i){var r=n(i).val(),u=this.getOptionByValue(r);n(u).prop("selected",!1)},this)));n('li input[value="'+this.options.selectAllValue+'"]',this.$ul).prop("checked",!1);n("option",this.$select).filter(":selected").prop("selected",!1);this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups();i&&this.options.onDeselectAll()},rebuild:function(){this.$ul.html("");this.options.multiple=this.$select.attr("multiple")==="multiple";this.buildSelectAll();this.buildDropdownOptions();this.buildFilter();this.updateButtonText();this.updateSelectAll(!0);this.options.enableClickableOptGroups&&this.options.multiple&&this.updateOptGroups();this.options.disableIfEmpty&&n("option",this.$select).length<=0?this.disable():this.enable();this.options.dropRight&&this.$ul.addClass("pull-right")},dataprovider:function(t){var i=0,u=this.$select.empty();n.each(t,function(t,f){var e,o,s;if(n.isArray(f.children))i++,e=n("<optgroup/>").attr({label:f.label||"Group "+i,disabled:!!f.disabled,value:f.value}),r(f.children,function(t){var i={value:t.value,label:t.label||t.value,title:t.title,selected:!!t.selected,disabled:!!t.disabled};for(var r in t.attributes)i["data-"+r]=t.attributes[r];e.append(n("<option/>").attr(i))});else{o={value:f.value,label:f.label||f.value,title:f.title,"class":f["class"],selected:!!f.selected,disabled:!!f.disabled};for(s in f.attributes)o["data-"+s]=f.attributes[s];e=n("<option/>").attr(o);e.text(f.label||f.value)}u.append(e)});this.rebuild()},enable:function(){this.$select.prop("disabled",!1);this.$button.prop("disabled",!1).removeClass("disabled")},disable:function(){this.$select.prop("disabled",!0);this.$button.prop("disabled",!0).addClass("disabled")},setOptions:function(n){this.options=this.mergeOptions(n)},mergeOptions:function(t){return n.extend(!0,{},this.defaults,this.options,t)},hasSelectAll:function(){return n("li.multiselect-all",this.$ul).length>0},updateOptGroups:function(){var i=n("li.multiselect-group",this.$ul),t=this.options.selectedClass;i.each(function(){var r=n(this).nextUntil("li.multiselect-group").not(".multiselect-filter-hidden").not(".disabled"),i=!0;r.each(function(){var t=n(".checkbox-label input",this),r=t.val();t.prop("checked")||(i=!1)});t&&(i?n(this).addClass(t):(n(this).removeClass(t),n(this).find("input").prop("checked",!1)));n("input",this).prop("checked",i)})},updateSelectAll:function(){var f;if(this.hasSelectAll()){var t=n("li.multiselect-all",this.$ul),i=t.find("input"),r=n("li:not(.multiselect-item):not(.multiselect-filter-hidden):not(.multiselect-group):not(.disabled) input:enabled",this.$ul),e=r.length,u=r.filter(":checked").length;u>0&&u===e?(i.prop("checked",!0),t.addClass(this.options.selectedClass),f=this.$container.closest(".form-group").next('input[type="hidden"]'),f.val("-1")):(i.prop("checked",!1),t.removeClass(this.options.selectedClass))}},updateButtonText:function(){var t=this.getSelected(),i;this.options.enableHTML?n(".multiselect .multiselect-selected-text",this.$container).html(this.options.buttonText(t,this.$select)):n(".multiselect .multiselect-selected-text",this.$container).text(this.options.buttonText(t,this.$select));i=this.options.buttonTitle(t,this.$select);n(".multiselect",this.$container).attr("title",i);n(".multiselect",this.$container).attr("data-original-title",i);this.updateValuesToSubmit(t,this.$select)},removeRepeatedValues:function(t){var i="",u=",",r={};return t.each(function(){if(!r[this.value]){r[this.value]=this.value;var t=n(this).attr("label")!==undefined?n(this).attr("label"):n(this).val();i+=t+u}}),i},updateValuesToSubmit:function(t){var i=this.$container.closest(".form-group").next('input[type="hidden"]'),u=n("li:not(.multiselect-item):not(.multiselect-filter-hidden):not(.multiselect-group):not(.disabled) input:enabled",this.$ul),f=u.length,e=u.filter(":checked").length,r;t.length===0?i.val(""):f==e?i.val("-1"):(r=this.removeRepeatedValues(t),i.val(r.substr(0,r.length-1)))},getSelected:function(){return n("option",this.$select).filter(":selected")},getOptionByValue:function(t){return n('option[value="'+t+'"]',this.$select)},getInputByValue:function(t){for(var r,u=n("li input:not(.multiselect-search)",this.$ul),f=t.toString(),i=0;i<u.length;i=i+1)if(r=u[i],r.value===f)return n(r)},updateOriginalOptions:function(){this.originalOptions=this.$select.clone()[0].options},asyncFunction:function(n,t,i){var r=Array.prototype.slice.call(arguments,3);return setTimeout(function(){n.apply(i||window,r)},t)},setAllSelectedText:function(n){this.options.allSelectedText=n;this.updateButtonText()}};n.fn.multiselect=function(t,r,u){return this.each(function(){var f=n(this).data("multiselect"),e=typeof t=="object"&&t;f||(f=new i(this,e),n(this).data("multiselect",f));typeof t=="string"&&(f[t](r,u),t==="destroy"&&n(this).data("multiselect",!1));n('[data-toggle-second="tooltip"]').tooltip()})};n.fn.multiselect.Constructor=i;n(function(){top.eBankit.Presentation.GetResource("MSSearchPlaceHolder");n("select[data-role=multiselect]").multiselect()})});