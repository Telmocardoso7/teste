/*!
 * Floating Message v1.0.3
 * http://sideroad.secret.jp/
 *
 * Copyright (c) 2009 sideroad
 *
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * Date: 2009-08-18
 * 
 * @author sideroad
 * @require jQuery, jQueryUI
 * 
 */
(function(n){var t={"top-left":10,"top-right":10,"top-center":10,"bottom-left":10,"bottom-right":10},u=10,i={"top-left":[],"top-right":[],"top-center":[],"bottom-left":[],"bottom-right":[]},r=function(r){var f,v=r.attr("id"),u=r.data("floating-message"),o={},s=0,y=u.range,p=u.position,h=u.duration,w=u.stuffEasing,b=u.hide,c=u.close,l=u.timerId,a=u.height+u.margin+u.padding*2,e=i[u.position];for(l&&clearTimeout(l),f=0;f<e.length;f++){if(u=e[f],v==u.id){s=f;continue}u.range>y&&(u.range-=a,o[u.verticalAlign]=u.range,u.elem.stop().animate(o,{duration:h,easing:w,queue:!1}))}e.splice(s,1);t[p]-=a;r.stop().hide(b,h,function(){n(this).remove();c&&c()})};n.floatingMessage=function(f,e){var a="jqueryFloatingMessage"+(new Date).getTime()+""+parseInt(Math.random()*1e4,10),o=n('<div id="'+a+'" class="ui-widget-content ui-corner-all ui-floating-message"><\/div>'),s={},h=0,c=0,l;return e=e||{},e=n.extend(!0,{position:"top-left",verticalAlign:(e.position||"top-left").split("-")[0],align:(e.position||"top-left").split("-")[1],width:300,height:50,time:!1,show:"drop",hide:"drop",padding:10,margin:10,duration:500,stuffEasing:"easeOutBounce",body:n("<div><\/div>"),open:!1,close:!1,click:r,elem:o,timerId:!1,id:a},e),e.range=t[e.position],h=e.height,c=e.padding,l=e.open,f&&e.body.html(f.replace(/\n/g,"<br />")),e.className&&o.addClass(e.className),s={width:e.width+"%",height:h+"px",margin:"auto",position:"absolute",padding:c+"px",left:e.left},s[e.verticalAlign]=t[e.position],s[e.align]=u,o.css(s).append(e.body),o.bind("destroy.fms",function(){r(o)}),n(document.body).append(o),e.click&&o.bind("click.fms",function(){e.click(o)}),o.show(e.show,e.duration,function(){e.time&&(e.timerId=setTimeout(function(){e.click(o)},e.time));l&&l()}),i[e.position].push(e),t[e.position]+=h+e.margin+c*2,o.data("floating-message",e),e.body};n.fn.floatingMessage=function(t){return this.each(function(){typeof t=="string"?n(this).parent(".ui-floating-message").trigger(t+".fms"):(t=t||{},t.body=this,n.floatingMessage(!1,t))})}})(jQuery);