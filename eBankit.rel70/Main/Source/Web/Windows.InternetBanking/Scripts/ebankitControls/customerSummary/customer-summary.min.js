function fillIfEmpty(n,t){return t<=0&&n.push({x:"N/A",y:100,text:"100%",type:0,fill:colors[0]}),n}function BuildPieChart(n,t,i){n.highcharts({chart:{type:"pie",renderTo:"container",width:300,height:300},title:{text:""},plotOptions:{pie:{shadow:!1,center:["50%","50%"]}},credits:{enabled:!1},tooltip:{pointFormat:"{point.tooltipText}",valueSuffix:"%"},series:[{data:t,size:"82%",innerSize:"72%",borderWidth:0,dataLabels:{enabled:!1}},{data:i,size:"100%",innerSize:"96%",borderWidth:0,dataLabels:{enabled:!1}}]})}function BuildDoughnutChart(n,t,i){n.ejChart({commonSeriesOptions:{type:"doughnut",enableAnimation:!0,marker:{visible:!1},tooltip:{visible:!0,format:"<span style='color:#point.fill#'><b>#point.x# <\/b><\/span><br/> #point.text#",opacity:.8},highlightSettings:{enable:!0,mode:"point"}},series:[{points:t,doughnutSize:.82,doughnutCoefficient:.8},{points:i,doughnutCoefficient:.88,doughnutSize:.9}],isResponsive:!0,size:{height:"300"},seriesRendering:"seriesRender",load:"loadTheme",legend:{visible:!1}})}$(document).ready(function(){$(".tab-pane").first().addClass("active");$(".tab-pane").first().addClass("in");CreateTooltip()});EndPageRequest=function(){CreateTooltip()};Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndPageRequest);CreateTooltip=function(){$(".lengend-tooltip").tooltip({html:!0})};$(function(){var r;if($("[data-color-type]").each(function(){var n=$(this).data("color-type");n!=undefined&&n!=null&&$(this).attr("style","background-color:"+colors[n]+";")}),$("[id$=hdnCategoriesData]").val()!=""&&$("[id$=hdnCategoriesData]").val()!=="undefined"){for(var i=JSON.parse($("[id$=hdnCategoriesData]").val()),t,u=[],f=[],e=0,o=0,n=0;n<i.length;n++)for(u.push({x:i[n].description,y:i[n].value,text:i[n].value+"%",type:i[n].type,fill:colors[i[n].type]}),o=o+i[n].value,r=i[n].SubCategorie,t=0;t<r.length;t++)colors[r[t].type]==undefined&&console.log("category type "+r[t].type+" does not have color"),f.push({x:r[t].description,y:r[t].value,text:r[t].value+"%",type:i[n].type,fill:colors[r[t].type]}),e=e+r[t].value;f=fillIfEmpty(f,e);u=fillIfEmpty(u,o);BuildDoughnutChart($("#customerSummary"),f,u)}});