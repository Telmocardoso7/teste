eBankit=eBankit||{};eBankit.Presentation=eBankit.Presentation||{};eBankit.Presentation.SessionControl=eBankit.Presentation.SessionControl||{};eBankit.Presentation.SessionControl.Logic=function(){var t,i,n="SESSION_POPUP",r="#divRenewSessionContainer",u=eBankit.Presentation.SessionControl.Configuration.TimeBeforePopup,f=eBankit.Presentation.SessionControl.Configuration.SessionRemainingTime,c=eBankit.Presentation.SessionControl.Configuration.PopupText,l=eBankit.Presentation.SessionControl.Configuration.SessionExpiredUrl,a=eBankit.Presentation.SessionControl.Configuration.PopupTime,e=eBankit.Presentation.SessionControl.Configuration.ErrorMarginPopup,v=eBankit.Presentation.SessionControl.Configuration.RenewSessionPage,d=eBankit.Presentation.SessionControl.Configuration.HasSlidingSession,o=eBankit.Presentation.SessionControl.Configuration.SessionTimeout,s=function(){window.clearTimeout(t);window.clearTimeout(i)},y=function(){sessionStorage.getItem(n)==null&&(t=window.setTimeout(h,u));i=window.setTimeout(w,f)},h=function(){sessionStorage.setItem(n,!0);itcore_ui.HideModal();itcore_ui.ShowTopPopupConfirm(c,top.eBankit.Presentation.GetResource("SessionTimeOutTitle"),"eBankit.Presentation.SessionControl.Logic.RenewSession()")},p=function(){s();sessionStorage.removeItem(n);u=o-a-e;f=o-e},w=function(){window.location.href=l},b=function(){eBankit.Presentation.Loading();var n=document.createElement("iframe");n.setAttribute("src",v);n.onload=function(){var n=$(this).contents().find(".btn-renew");(n.length==0||n==undefined)&&(window.top.$(r).html(""),window.top.eBankit.Presentation.UnLoading(),window.top.eBankit.Presentation.SessionControl.Logic.ResetSate(),window.top.eBankit.Presentation.SessionControl.Logic.ScheduleTimeouts())};$(r).append(n)},k=function(){window.top.eBankit.Presentation.SessionControl.Logic.ResetSate();window.top.eBankit.Presentation.SessionControl.Logic.ScheduleTimeouts()};return{ClearTimeouts:s,ScheduleTimeouts:y,ShowPopup:h,ResetSate:p,RenewSession:b,RenewSlidingSession:k}}();$(document).ready(function(){function n(n){return n.id!=null&&n.id!=""||n.parentNode.id!=""}eBankit.Presentation.SessionControl.Configuration.HasSlidingSession=="True"?(eBankit.Presentation.SessionControl.Logic.RenewSlidingSession(),document.addEventListener("click",function(t){var i=$(t.target.parentElement.children).filter(function(){if($(this).attr("onclick"))return $(this).attr("onclick").indexOf("eBankit.Presentation.SessionControl.Logic.RenewSession();")>=0});n(t.target)&&!i.length&&eBankit.Presentation.SessionControl.Logic.RenewSlidingSession()})):eBankit.Presentation.SessionControl.Logic.ScheduleTimeouts()});