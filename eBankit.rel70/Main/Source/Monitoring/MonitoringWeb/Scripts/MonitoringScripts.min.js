function isJson(n){try{JSON.parse(n)}catch(t){return!1}return!0}function calculateTendencyValues(n){return n=calculateTendencyHelper(n,"NRequests"),calculateTendencyHelper(n,"AvgExecutionTime")}function calculateTendencyHelper(n,t){var u=0,i=0,f=0,r=0,h=0,e=0,o=0,s=n.length;return $(n).each(function(n,e){u=u+n*e[t];i=i+e[t];f=f+Math.pow(n,2);r=r+n}),h=i,e=r,u=s*u,i=r*i,f=s*f,r=Math.pow(r,2),o=Math.round((u-i)/(f-r)*100)/100,e=o*e,i=Math.round((h-e)/s*100)/100,$(n).each(function(n,r){var u=Math.round((o*n+i)*100)/100;u<0&&(u=0);r[t+"Tendency"]=u}),n}function functionLoadTree(n,t){$("#SoapIn").html('<div id="loadingSoapIn"  style="padding-top:100px;"><span class="spinner"><\/span><\/div>');$("#SoapOut").html('<div id="loadingSoapOut" style="padding-top:100px;"><span class="spinner"><\/span><\/div>');setTimeout(function(){var f,r;if($.trim(t).length>0){isJson(t)===!1&&(f=new X2JS,t=JSON.stringify(f.xml_str2json(t)));$("#actions"+n).css("display","block");$("#loading"+n).remove();$("#"+n).JSONView(t,{collapsed:!0});var e=0,u=[],i=0;$('[class^="obj level"]').each(function(){var t=$(this).attr("class").split(" "),n=t[1].replace("level","");n>e&&(u[i]=n,e=n)});r=0;u.length>0&&(r=u[0]);$("#expand-btn"+n).prop("disabled",!1);$("#toggle-levelPrevious-btn"+n).prop("disabled",!0);$("#collapse-btn"+n).prop("disabled",!0);r==0&&($("#expand-btn"+n).prop("disabled",!0),$("#toggle-levelNext-btn"+n).prop("disabled",!0));$("#collapse-btn"+n).on("click",function(){$("#"+n).JSONView("collapse");i=0;$("#toggle-levelNext-btn"+n).prop("disabled",!1);$("#expand-btn"+n).prop("disabled",!1);$("#toggle-levelPrevious-btn"+n).prop("disabled",!0);$("#collapse-btn"+n).prop("disabled",!0)});$("#expand-btn"+n).on("click",function(){$("#"+n).JSONView("expand");$("#toggle-levelNext-btn"+n).prop("disabled",!0);$("#expand-btn"+n).prop("disabled",!0);$("#toggle-levelPrevious-btn"+n).prop("disabled",!1);$("#collapse-btn"+n).prop("disabled",!1);i=r});$("#toggle-levelNext-btn"+n).on("click",function(){i+=1;$("#"+n).JSONView("toggle",i);$("#toggle-levelPrevious-btn"+n).prop("disabled",!1);$("#collapse-btn"+n).prop("disabled",!1);i==r&&($("#toggle-levelNext-btn"+n).prop("disabled",!0),$("#expand-btn"+n).prop("disabled",!0))});$("#toggle-levelPrevious-btn"+n).on("click",function(){i>1&&i<=r?($("#"+n).JSONView("toggle",i),i-=1):(i=0,$("#"+n).JSONView("collapse"),$("#toggle-levelPrevious-btn"+n).prop("disabled",!0),$("#collapse-btn"+n).prop("disabled",!0));$("#toggle-levelNext-btn"+n).prop("disabled",!1);$("#expand-btn"+n).prop("disabled",!1)})}else $("#loading"+n).remove(),$("#actions"+n).css("display","none"),$("#"+n).html("<br><br>No soap where found in this request")},1e3);$("#collapse-btn"+n).off("click");$("#collapse-btn"+n).off("click");$("#toggle-levelNext-btn"+n).off("click");$("#toggle-levelPrevious-btn"+n).off("click")}function functionLoadTreeByPanel(n,t){$("#"+n).html('<div id="loading'+n+'"  style="padding-top:100px;"><span class="spinner"><\/span><\/div>');setTimeout(function(){if($.trim(t).length>0){if(isJson(t)===!1){var i=new X2JS;t=i.xml_str2json(t)}$("#loading"+n).remove();$("#"+n).jsonView(t)}else $("#loading"+n).remove(),$("#"+n).jsonView("null")},1e3)}function initTab(){$('a[data-toggle="tab"]:first').tab("show")}function formatException(n){var t,i;for(result=n||"",t=[{find:/ at /g,repl:"<br>&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp  at "},{find:/ ---> /g,repl:"<br> ---> "},{find:/ --- End of inner exception stack trace ---/g,repl:"<br>   --- End of inner exception stack trace ---"},{find:/:line/g,repl:": <b>line<\/b>"}],i=0;i<t.length;i++)result=result.replace(t[i].find,t[i].repl);return t.forEach(function(n){result=result.replace(n.find,n.repl)}),result}function TryParseInt(n,t){var i=t;return n!==null&&n.length>0&&(isNaN(n)||(i=parseInt(n))),i}var SelectTimeInterval,ChangeTimeInterval;$(".document").ready(function(){typeof Morris!="undefined"&&(Morris.Donut.prototype.setLabels=function(n,t){var e,s,h,o,i,r,u,f,c;return e=(Math.min(this.el.width()/2,this.el.height()/2)-10)*2/3,o=1.8*e,h=e/2,s=e/3,this.text1.attr({text:n,transform:""}),i=this.text1.getBBox(),r=Math.min(o/i.width,h/i.height),(isNaN(r)||r=="-Infinity")&&(r="0.0"),this.text1.attr({transform:"S"+r+","+r+","+(i.x+i.width/2)+","+(i.y+i.height)}),this.text2.attr({text:t,transform:""}),u=this.text2.getBBox(),f=Math.min(o/u.width,s/u.height),(isNaN(f)||f=="-Infinity")&&(f="0.0"),c={transform:"S"+f+","+f+","+(u.x+u.width/2)+","+u.y},this.text2.attr(c)})});var ToggleSideBarMenu=function(n,t){n.addClass("active");t.addClass("active")},InitializeTooltip=function(){$('[data-toggle="tooltip"]').tooltip({container:"body"})},InitializeDropdowns=function(){$(".selectpicker").selectpicker()},InitializeRangedDatetimePicker=function(n,t,i){$(".dpicker").datetimepicker({format:i});n.on("dp.change",function(i){n.data("DateTimePicker").date().toString()==moment().toString()&&n.data("DateTimePicker").date(n.data("DateTimePicker").date().startOf("day"));t.data("DateTimePicker").minDate(i.date)});t.on("dp.change",function(t){n.data("DateTimePicker").maxDate(t.date)})},InitializeAutoComplete=function(n,t){n.autocomplete({source:t})},InitializeSlider=function(n,t,i,r,u){n.ionRangeSlider({min:parseInt(t),max:parseInt(i),postfix:" s",type:"double",grid:!0,from:parseInt(r),to:parseInt(u)})},InitializeTableLoading=function(n){$("#"+n).find("tbody").append('<div id="loading-row"><span class="spinner"><\/span><\/div>');$("#loading-row").height(100);$("#"+n).on("preXhr.dt",function(){var t=$("#"+n+" tbody").height();$("#"+n+" tbody tr").remove();$("#"+n+" tbody").append('<div id="loading-row"><span class="spinner"><\/span><\/div>');$("#loading-row").height(t)});$("#"+n).on("xhr.dt",function(){$("#"+n+" tbody").find("#loading-row").remove()})},InitializeTableHoverStyle=function(n,t){$("#"+n+" > tbody").on("mouseover","td",function(){var n=t.cell(this).index().row;$(t.row(n).node()).addClass("row_selected");$(t.row(n).node()).addClass("cursorHand")});$("#"+n+" > tbody").on("mouseout","td",function(){var n=t.cell(this).index().row;$(t.rows().nodes()).removeClass("row_selected")})},InitializeDataTable=function(n,t,i,r,u,f,e,o){(typeof u=="undefined"||u===null)&&(u=!0);(typeof e=="undefined"||e===null)&&(e="js-switch");var s={sPaginationType:"full_numbers",paging:u,serverSide:!0,processing:!0,searching:!1,ordering:!0,order:r,ajax:{url:t,type:"POST",dataSrc:"requests"},aoColumns:i,fnDrawCallback:function(){var n=Array.prototype.slice.call(document.querySelectorAll("."+e));n.forEach(function(n){var t=new Switchery(n,{color:"rgb(0, 172, 172)"})})}};typeof o!="undefined"&&o!=null&&(s.dom=o);table=$("#"+n).DataTable(s);table.$("td").tooltip({delay:0,track:!0,fade:250});InitializeTableLoading(n);InitializeTableHoverStyle(n,table);typeof f!="undefined"&&f!=null&&(f==="Today"||f===""?$(table.column(2).header()).html("Avg<br>Execution(s)"):$(table.column(2).header()).html("Avg<br>Execution(ms)"));$("#"+n).css("width","100%")},InitializeGraph=function(n,t,i,r){var o="ms",s="TimeLine",u=[],f=[],e="";typeof r!="undefined"&&(r==="Requests"?(u=["NRequests","NRequestsTendency"],f=["Nº Request","Nº Request Tendency"],e="NRequests"):(u=["AvgExecutionTime","AvgExecutionTimeTendency"],f=["Response Time("+o+")","Response Time("+o+") Tendency"],e="AvgExecutionTime"));$("#"+n).append('<div id="loading-row"><span class="spinner"><\/span><\/div>');$.ajax({dataType:"json",url:t,success:function(t){t=calculateTendencyHelper(t,e);$(window).prop("w"+n,Morris.Area({data:t,xkey:s,ykeys:u,labels:f,fillOpacity:.5,hideHover:"auto",behaveLikeLine:!0,resize:!0,parseTime:!1,pointFillColors:["#ffffff"],pointStrokeColors:["black"],element:n}).on("click",i));$("#"+n).find("#loading-row").remove();$($($("#"+n).find("path"))[7]).css("fill-opacity","0.0")}})},InitializeDonutGraph1=function(n,t){$("#"+n).append('<div id="loading-row"><span class="spinner"><\/span><\/div>');$.ajax({dataType:"json",url:t,success:function(t){t.length>0?(donutchart1=Morris.Donut({data:t,element:n,resize:"true"}),window.donutchart1=donutchart1):$("#graph1").html('<h3 class="panel-title text-center">No data to show.<\/h3>');$("#"+n).find("#loading-row").remove()}})},InitializeDonutGraph2=function(n,t){$("#"+n).append('<div id="loading-row"><span class="spinner"><\/span><\/div>');$.ajax({dataType:"json",url:t,success:function(t){t!==null&&t!==undefined&&t.length>0?(donutchart2=Morris.Donut({data:t,element:n,resize:"true"}),window.donutchart2=donutchart2):$("#graph2").html('<h3 class="panel-title text-center">No data to show.<\/h3>');$("#"+n).find("#loading-row").remove()}})};var InitializeDetailClickEvent=function(n,t,i){$("tbody .detail").live("click",function(r){var u,e,f,o;for(r.stopPropagation(),u=table.row(this.parentElement).data(),e=0;e<n.length;e++)f=n[e],o=$("#"+f),moment(u[f],"YYYY-MM-DDTHH:mm:ss.SSSS",!0).isValid()?o.html(moment(u[f]).format(t)):f==="Exception"?o[0].innerHTML=formatException(u[f]):o.html($("<div/>").text(u[f]).html());i===!0&&($("input:hidden#txtIn").val(u.SoapIn),$("input:hidden#txtOut").val(u.SoapOut))})},InitializeClickRedirect=function(n,t,i){$("#"+n+" > tbody > tr").live("click",function(){var n=table.row(this).data()[i];$.trim(n).length>0?window.location.href=t.replace("__reqId__",n):$("#ModalMsg").modal("show")})},InitializeClickRedirect=function(n,t,i){$("#"+n+" > tbody > tr").live("click",function(){event.stopPropagation();var u=$("#"+n).DataTable(),r=u.row(this).data()[i];$.trim(r).length>0&&(window.location.href=t.replace("__reqId__",r))})};var InitializeStackedBarGraph=function(n,t){$("#"+n).append('<div id="loading-row"><span class="spinner"><\/span><\/div>');$.ajax({dataType:"json",url:t,success:function(t){var i=Morris.Bar({stacked:"true",data:t,xkey:"Interval",ykeys:["DataFileSize","LogFileSize","DataFileSizeFree","LogFileSizeFree"],labels:["Data Size Used (Mb)","Log Size Used (Mb)","Data Size Free (Mb)","Log Size Free (Mb)"],xLabelMargin:2,fillOpacity:.5,hideHover:"auto",behaveLikeLine:!0,resize:!0,parseTime:!1,barColors:["#ff6666","#ff8d66","#a0db8e","#66cdaa"],element:n});$(window).prop("w"+n,i);$("#"+n).find("#loading-row").remove();CreateChartLegend(i,"graphLegend","stacked")}})},InitializeStackedBarGraphTable=function(n,t){$("#"+n).append('<div id="loading-row"><span class="spinner"><\/span><\/div>');$.ajax({dataType:"json",url:t,success:function(t){var i=Morris.Bar({stacked:"true",data:t,xkey:"Interval",ykeys:["UsedSpace","UnusedSpace"],labels:["UsedSpace (Kb)","UnusedSpace (Kb)"],xLabelMargin:2,fillOpacity:.5,hideHover:"auto",behaveLikeLine:!0,resize:!0,parseTime:!1,barColors:["#ff6666","#66cdaa"],element:n});$(window).prop("w"+n,i);$("#"+n).find("#loading-row").remove();CreateChartLegend(i,"graphLegend","stacked")}})},CreateChartLegend=function(n,t,i){n.options.labels.forEach(function(r,u){var e=$('<span class="legend-text"><\/span>').text(r),f=null;i=="bar"||i=="stacked"?f=$('<span class="legend-square"><\/span>').css({"background-color":n.options.barColors[u],"border-color":n.options.barColors[u]}):(i=="line"||i=="area")&&(f=$('<span class="legend-square"><\/span>').css({"background-color":n.options.lineColors[u],"border-color":n.options.lineColors[u]}));$("#"+t).append(e);$("#"+t).append(f)})},InitCarousel=function(){$(".carousel").carousel({interval:!1});$(".carousel .item").each(function(){var n=$(this).next(),t,i;for(n.length||(n=$(this).siblings(":first")),n.children(":first-child").clone().appendTo($(this)),t=4,$(this).attr("name")=="cFour"&&(t=2),i=0;i<t;i++)n=n.next(),n.length||(n=$(this).siblings(":first")),n.children(":first-child").clone().appendTo($(this))})},GetDataToRefreshProbes=function(n){$.ajax({url:n,type:"POST",contentType:"json",success:function(n){n!==null&&n!==undefined&&n.length!=0&&RefreshProbes(JSON.parse(n))},error:function(n,t,i){errorHandler(n,t,i)}})},RefreshProbes=function(n){var i,t;if(n!==null&&n!==undefined&&n.length!==0&&n!==null&&n!==undefined)for(i=0;i<n.length;i++)t=n[i],$("[mark=pc"+t.Id+"]").each(function(){$(this).removeClass("bg-probe-error").removeClass("bg-probe-success");t.HaveErrors?$(this).addClass("bg-probe-error"):$(this).addClass("bg-probe-success")}),$("[mark=ps"+t.Id+"]").each(function(){$(this).html(t.Status)}),$("[mark=pi"+t.Id+"]").each(function(){$(this).removeClass("fa-play").removeClass("fa-pause");t.Operation=="Testing"?$(this).addClass("fa-pause"):$(this).addClass("fa-play");t.HaveErrors?$(this).css("color","#e60000"):$(this).css("color","#00b300")}),$("[mark=po"+t.Id+"]").each(function(){$(this).html(t.Operation)}),$("[mark=pcc"+t.Id+"]").each(function(){t.HaveErrors?$(this).css("color","#e60000"):$(this).css("color","#00b300")}),RefreshTests(t.Tests)},RefreshTests=function(n){for(var t,i=0;i<n.length;i++)t=n[i],$("[mark=tc"+t.Id+"]").each(function(){$(this).removeClass("bg-probe-error").removeClass("bg-probe-success").removeClass("bg-probe-slow").removeClass("bg-probe-unknown").removeClass("bg-probe-timeout");t.LastResult.Status=="Failed"?$(this).addClass("bg-probe-error"):t.LastResult.Status=="Slow"?$(this).addClass("bg-probe-slow"):t.LastResult.Status=="Working"?$(this).addClass("bg-probe-success"):t.LastResult.Status=="Timeout"||t.LastResult.Status=="Conn. Timeout"?$(this).addClass("bg-probe-timeout"):$(this).addClass("bg-probe-unknown")}),$("[mark=ts"+t.Id+"]").each(function(){$(this).html(t.LastResult.Status)}),$("[mark=tt"+t.Id+"]").each(function(){$(this).html(t.LastResult.TimeTaken)}),$("[mark=tic"+t.Id+"]").each(function(){t.LastResult.Status=="Failed"?$(this).css("color","#e60000"):t.LastResult.Status=="Slow"?$(this).css("color","#F5A30E"):t.LastResult.Status=="Working"?$(this).css("color","#00b300"):t.LastResult.Status=="Timeout"||t.LastResult.Status=="Conn. Timeout"?$(this).css("color","#9600A9"):$(this).css("color","#fff")}),RefreshTests(t.Tests)},ToogleProbeParent=function(n,t,i,r){$("#"+r).find(".probe-parent-on").each(function(){$(this).attr("name")!=$(n).attr("name")&&$(this).removeClass("probe-parent-on")});t!=null&&($(n).hasClass("probe-parent-on")?($(t).collapse("hide"),UpdateSelectedProbe(0)):($(t).collapse("show"),UpdateSelectedProbe(i)));CloseChild(r);var u=$(n).attr("name");$("#"+r).find("[name="+u+"]").each(function(){$(this).toggleClass("probe-parent-on")})},CloseChild=function(n){var t=$("#"+n).attr("child-group");typeof t!="undefined"&&($("#"+t).find(".probe-parent-on").each(function(){$(this).removeClass("probe-parent-on")}),$("#"+t+" .panel-collapse").collapse("hide"),CloseChild(t))},handleVisitorsVectorMap=function(n,t){$.ajax({url:n,type:"POST",contentType:"json",success:function(n){for(var r={},i=0;i<n.length;i++)r[n[i].CountryCode]=n[i].Value;n.length>=3?$("#"+t).height("217px"):n.length==2?$("#"+t).height("254px"):n.length==1&&$("#"+t).height("291px");DrawVisitorsVectorMap(r,t);CreateMapLegend(n.slice(0,3),t)},error:function(n,t,i){errorHandler(n,t,i)}})},DrawVisitorsVectorMap=function(n,t){$("#"+t).vectorMap({map:"world_mill",container:$("#"+t),regionStyle:{initial:{fill:"rgb(97,109,125)","fill-opacity":1,stroke:"none","stroke-width":.4,"stroke-opacity":1},hover:{"fill-opacity":.6},selected:{fill:"yellow"}},series:{regions:[{values:n,scale:["#C8EEFF","#0071A4"],normalizeFunction:"polynomial"}]},backgroundColor:"#2d353c",onRegionTipShow:function(t,i,r){typeof n[r]!="undefined"?i.html(i.html()+" (Users - "+n[r]+")"):i.html(i.html()+" (No Users)")}})},CreateMapLegend=function(n,t){if(n.length>0){$("#"+t).parent().append('<div id="MapUsersLegend" class="list-group">');for(var i=0;i<n.length;i++)$("#MapUsersLegend").append('<span class="list-group-item list-group-item-inverse text-ellipsis" style="border-top-left-radius:0; border-top-right-radius:0;"><span class="badge badge-'+(i==0?"success":i==1?"primary":"inverse")+'">'+n[i].Percentage+"%<\/span>"+(i+1)+". "+n[i].Country+"<\/span>")}},InitializeEnabledClick=function(n,t,i,r,u){$("tbody ."+r).live("click",function(f){f.stopPropagation();var o=this.parentElement,e=$(this).find("."+u),s=$(this).find(".switchery");if(e.attr("Ignore")==undefined){$("#confirmModalTitle").text("Dangerous Operation");$("#confirmModalMessage").text("Do you really want to proceed with this action?");$("#confirmModalButton").prop("onclick",null).off("click");$("#confirmModalButton").on("click",function(){EnabledClickAction(n,t,o,i,r);e.attr("Ignore","true");$("#confirmModal").modal("hide")});$("#confirmModal").on("hidden.bs.modal",function(){e.attr("Ignore")==undefined&&(e.attr("Ignore","true"),s.click())});$("#confirmModal").modal("show")}else e.removeAttr("Ignore"),$("#confirmModal").unbind("hidden.bs.modal"),$("#confirmModal").modal("hide")})},EnabledClickAction=function(n,t,i,r,u){waitLoading();event.stopPropagation();var f=$("#"+t).DataTable(),e=f.row(i).data(),o=e[r];$.ajax({url:n,type:"POST",data:JSON.stringify(e),contentType:"application/json;charset=utf-8",async:!0,success:function(){if(f.row(i).data()[r]=!o,f.draw(!1),u=="IsEnabledMethod"){var n=$("#results-table-Services").DataTable();n.draw(!1)}},error:function(n,t,i){errorHandler(n,t,i)}});stopLoading()},ChangeTimeOut=function(n,t,i,r){waitLoading();event.stopPropagation();var u=$("#"+n).DataTable(),f=JSON.stringify({Id:i,Timeout:r});$.ajax({url:t,type:"POST",data:f,contentType:"application/json;charset=utf-8",async:!1,success:function(){u.draw(!1)},error:function(n,t,i){errorHandler(n,t,i)}});stopLoading()},DeleteRecordFunc=function(n,t,i,r){event.stopPropagation();var u=$("#"+n).DataTable(),f=$("#"+r).DataTable(),e=JSON.stringify({Id:i});$.ajax({url:t,type:"POST",data:e,contentType:"application/json;charset=utf-8",async:!0,success:function(){$(".modal").modal("hide");stopLoading();u.draw(!1);f.draw(!1)},error:function(n,t,i){errorHandler(n,t,i)}})},InsertRecordFunc=function(n,t,i,r){event.stopPropagation();var u=$("#"+n).DataTable(),f=JSON.stringify(i);$.ajax({url:t,type:"POST",data:f,contentType:"application/json;charset=utf-8",async:!0,success:function(n){if(stopLoading(),n=="False"&&$("#modalError").modal("show"),u.draw(!1),typeof r!="undefined"&&r!==null){var t=$("#"+r).DataTable();t.draw(!1)}},error:function(n,t,i){errorHandler(n,t,i);$("#modalError").modal("show")}})},SetSwitchery=function(n,t){if(n.checked=t,typeof Event!="function"&&document.fireEvent)n.fireEvent("onchange");else{var i=document.createEvent("HTMLEvents");i.initEvent("change",!0,!0);n.dispatchEvent(i)}},parseDate=function(n){var t=n.split(/[: -]/);return new Date(Date.UTC(t[0],t[1]-1,t[2],t[3],t[4],t[5]))},waitLoading=function(){$("#page-loader").removeClass("fade in hide");$("#page-loader").addClass("modal-backdrop fade in");$("#page-loader").css("background-color","#000000");$("#page-loader").css("display","block")},stopLoading=function(){$("#page-loader").addClass("fade in hide");$("#page-loader").removeClass("modal-backdrop fade in");$("#page-loader").css("background-color","transparent");$("#page-loader").css("display","none")},openModalError=function(n){$("#modalErrorMsg").html("<b>Exception:<\/b>  "+n);$("#modalError").modal("show")};SelectTimeInterval=function(n){$("[type=radio]").each(function(){$(this).val()==n&&$(this).prop("checked",!0)})};ChangeTimeInterval=function(n,t,i){$("#"+i).val(n);$("#"+t).submit()};