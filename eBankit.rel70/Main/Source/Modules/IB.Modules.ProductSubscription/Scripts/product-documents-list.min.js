function readCookie(n){for(var t,u=n+"=",r=document.cookie.split(";"),i=0;i<r.length;i++){for(t=r[i];t.charAt(0)===" ";)t=t.substring(1,t.length);if(t.indexOf(u)===0)return t.substring(u.length,t.length)}return""}var eBankit=eBankit||{};eBankit.DocumentList==undefined&&(eBankit.DocumentList=function(){function u(t,r){var e=$(t.get_inputFile()),u,f;n(!0);u=$("#"+e.data("container"));u&&(f="",f=r._errorMessage==="Invalid size"?u.data("invalid-file-size"):u.data("invalid-message"),i(u,f),document.getElementById("aspnetForm").target="")}function f(i,r){var u=$(i.get_inputFile()),e,f,o;if(u.data("size")&&!isNaN(u.data("size"))&&(e=i.get_inputFile().files[0].size,e>u.data("size")))throw new Error("Invalid size");if(u.data("format-types")&&(f=r.get_fileName(),o=f.substring(f.lastIndexOf(".")),jQuery.inArray(o,u.data("format-types"))===-1))throw new Error("Invalid Format");n();$("#__EVENTTARGET").val("");$("#__EVENTARGUMENT").val("");i.set_postBackUrl(c(i.get_postBackUrl(),t.queryStringDocumentId,u.data(t.documentIdProperty)))}function e(i,u){var f=$(i.get_inputFile()),e=f.data(t.documentIdProperty);n(!0);s(e,u.get_fileName());f.val("");r($("#"+f.data("container")))}function o(){$("#aspnetForm").attr("enctype","multipart/form-data");$(".file-input-container").not(".loaded").each(function(){var n=$(this),t,i;n.addClass("loaded");t=n.find("input:file");t&&(n.data("accept")&&t.attr("accept",n.data("accept")),n.data("size")&&t.data("size",n.data("size")),n.data("format-types")&&t.data("format-types",n.data("format-types")),n.siblings("[id$=UploadDocumentsContainer]").length&&t.data("container",n.siblings("[id$=UploadDocumentsContainer]").attr("id")),i=n.closest(".validation-file-container"),i&&t.data("target-validation",i.attr("id")))});$(t.selectorInputLabel).unbind("click");$(t.selectorInputLabel).click(function(){var t=$(this),i;t.addClass("loaded");t.data("target-cancel")!==undefined?(n(),eBankit.Presentation.NoLoading=!0,__doPostBack(t.data("target-cancel"))):(i=$("#"+t.data("target")+" input:file"),i.data("document",t.data("document-id")),i.click())});var r,i=function(){readCookie("loadedfile")?r=setTimeout(i,1e3):(createCookie("loadedfile","",-1),n(!0))};$("[data-document-download]").unbind("click");$("[data-document-download]").click(function(){var t=$(this);t.addClass("loaded");n();createCookie("loadedfile","0",1);setTimeout(i,1e3);eBankit.Presentation.NoLoading=!0;__doPostBack(t.data("document-download"))})}function s(n,t){var r=$("[data-document-filename-id='"+n+"']"),i;r&&(r.html(t),i=$("[data-document-id='"+n+"'].action-button"),i&&(i.parent().addClass("loaded"),i.hide(),i.siblings(".action-cancel").show(),$("[name$=hdnUploaded][data-document-id='"+n+"']").val("TRUE")))}function n(n){var t=$(".document-list");t&&(n?(t.parent().unblock(),eBankit.Presentation.NoLoading=!1):(t.parent().unblock(),t.parent().block({css:{padding:"0px",margin:"0px",top:"0px",left:"0px",position:"absolute",background:"#f6f6f6",border:0,width:"100%",height:"100%",opacity:.6},message:'<div class="loading-image" style="top:calc(50% - 40px);margin:auto;opacity:1;"><\/div>',overlayCSS:{opacity:0}})))}function h(n){if(n){var t=n.find("[name$=hdnUploaded]"),i=[];if(t.each(function(){this.value==="TRUE"&&i.push(this)}),i.length===t.length)return!0}return!1}function i(n,t){var i=n.closest(".validation-file-container"),r;i&&(i.addClass("error"),t&&(r=i.parent().find("> .label-error"),r.length?r.text(t).show():i.parent().append('<label class="label-error">'+t+"<\/label>")))}function r(n){var t=n.closest(".validation-file-container"),i;t&&(t.removeClass("error"),i=t.parent().find("> .label-error"),i&&i.hide())}function c(n,t,i){var r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),u=n.indexOf("?")!==-1?"&":"?";return n.match(r)?n.replace(r,"$1"+t+"="+i+"$2"):n+u+t+"="+i}var t={queryStringDocumentId:"docId",documentIdProperty:"document",selectorInputLabel:"[data-document-input-label='true']"};return{UploadComplete:e,StartUpload:f,UploadError:u,Load:o,UploadedAllFiles:h,DisplayErrorMessage:i,HideErrorMessage:r}}());$(document).ready(function(){eBankit.DocumentList.Load();var n=Sys.WebForms.PageRequestManager.getInstance();n.add_endRequest(function(){eBankit.DocumentList.Load()})});