function AddRequiredFieldValidator(n,t){var i=!0;return n.val()==""&&(t==undefined||t.id==n[0].id)?(eBankit.Presentation.InsertValidateMsg(n,top.eBankit.Presentation.GetResource("RequiredField")),i=!1):n.val()!=""&&(eBankit.Presentation.RemoveValidateMsg(n),n.popover("hide")),i}function IsValidNIF(){return!0}function IsNumeric(n){return/^\d+$/.test(n)}function selectImage(n){unselectAllImages();var t=$(n).find(".image-container-selector");t.addClass("selected");t.find(".image-container-selector-fill").html("&#10004;");hdnSecurityImage.val($(n).find("img").attr("key"))}function unselectAllImages(){$(".image-container-item").css("border","0px");$(".image-container-item").each(function(n,t){var i=$(t).find(".image-container-selector");i.removeClass("selected");i.find(".image-container-selector-fill").html("")})}eBankit.Presentation.Register2={};eBankit.Presentation.Register2.ValidateInputsConfirm=function(n){var t=!0;if(TextBoxNewKey.val()==""&&(n==undefined||n.id==TextBoxNewKey[0].id)?(eBankit.Presentation.InsertValidateMsg(TextBoxNewKey,top.eBankit.Presentation.GetResource("RequiredNewKey")),t=!1):TextBoxNewKey.val()!=""&&(eBankit.Presentation.RemoveValidateMsg(TextBoxNewKey),TextBoxNewKey.popover("hide")),t){TextBoxNewKey.val()=="1234567"||TextBoxNewKey.val()=="7654321"?(eBankit.Presentation.InsertValidateMsg(TextBoxNewKey,top.eBankit.Presentation.GetResource("InvalidKey")),t=!1):/^\d+$/.test(TextBoxNewKey.val())&&hdnCredentialType.val()=="5"&&(eBankit.Presentation.InsertValidateMsg(TextBoxNewKey,top.eBankit.Presentation.GetResource("InvalidKey")),t=!1);var r=TextBoxConfirmNewKey.val(),u=TextBoxNewKey.val(),i=!1;r!=u&&(i=!0);(i||hdnCredentialType.val()=="5"&&(TextBoxNewKey.val().length<6||TextBoxNewKey.val().length>48)||hdnCredentialType.val()=="0"&&TextBoxNewKey.val().length!=7)&&(eBankit.Presentation.InsertValidateMsg(TextBoxNewKey,top.eBankit.Presentation.GetResource("InvalidKey")),t=!1)}return t};eBankit.Presentation.Register2.ValidateConfirmKey=function(){return TextBoxNewKey.val()!=TextBoxConfirmNewKey.val()?(eBankit.Presentation.InsertValidateMsg(TextBoxConfirmNewKey,top.eBankit.Presentation.GetResource("ConfirmInvalidKey")),!1):(eBankit.Presentation.RemoveValidateMsg(TextBoxConfirmNewKey),!0)};eBankit.Presentation.Register2.ValidateRegister=function(n){var t=!0;AddRequiredFieldValidator(txtTaxID,n)?IsValidNIF(txtTaxID.val())||(eBankit.Presentation.InsertValidateMsg(txtTaxID,top.eBankit.Presentation.GetResource("InvalidNIF")),t=!1):t=!1;AddRequiredFieldValidator(txtName,n)||(t=!1);AddRequiredFieldValidator(txtAccount,n)||(t=!1);AddRequiredFieldValidator(txtEmail,n)?eBankit.Presentation.ValidateEmailExp(txtEmail.val())||(eBankit.Presentation.InsertValidateMsg(txtEmail,top.eBankit.Presentation.GetResource("InvalidEmail")),t=!1):t=!1;AddRequiredFieldValidator(txtPhone,n)||(t=!1);var i=$("[id$=dtIDValidate_txField]"),r=$("[id$=dtPassport_txField]"),u=new Date,e=new Date(eBankit.dateJS.getDateFromFormat(i.val(),dateJSFormat)),o=new Date(eBankit.dateJS.getDateFromFormat(r.val(),dateJSFormat)),f=eBankit.Presentation.Register2.toDate(u.getFullYear()+"-"+(u.getMonth()+1)+"-"+u.getDate());return i.is(":visible")&&e<f?(eBankit.Presentation.InsertValidateMsg(i,top.eBankit.Presentation.GetResource("dtIDDateErroMsg")),t=!1):eBankit.Presentation.RemoveValidateMsg(i),r.is(":visible")&&o<f?(eBankit.Presentation.InsertValidateMsg(r,top.eBankit.Presentation.GetResource("dPassportDateErroMsg")),t=!1):eBankit.Presentation.RemoveValidateMsg(r),txtPhone.val().length<16?(eBankit.Presentation.InsertValidateMsg(txtPhone,top.eBankit.Presentation.GetResource("CellPhoneInvalidMsg")),t=!1):eBankit.Presentation.RemoveValidateMsg(txtPhone),t};eBankit.Presentation.Register2.ValidateQuestions=function(){var n=!0,t=!0;return $(".cd-select").each(function(t,i){!$(i).val()==""?eBankit.Presentation.RemoveValidateMsg($(i),top.eBankit.Presentation.GetResource("InvalidSecurityQuestion")):(eBankit.Presentation.InsertValidateMsg($(i),top.eBankit.Presentation.GetResource("InvalidSecurityQuestion")),n=!1)}),$(".trx-field").each(function(n,i){$.trim($(i).val())==""?(t=!1,eBankit.Presentation.InsertValidateMsg($(i),top.eBankit.Presentation.GetResource("RequiredSecurityQuestion"))):eBankit.Presentation.RemoveValidateMsg($(i),top.eBankit.Presentation.GetResource("RequiredSecurityQuestion"))}),n&&t?!0:!1};eBankit.Presentation.Register2.ValidateImages=function(){var n,t;return hdnHasImage.val()=="true"&&$(".image-container-item").each(function(t,i){var r=$(i).find(".image-container-selector");r.hasClass("selected")&&(n=!0,$(".image-container-item").css("border","0px"))}),n||hdnHasImage.val()!="true"||$(".image-container-item").css("border","2px solid red"),hdnHasCaption.val()=="true"&&($.trim($("#securityImagesList :text").val())==""?(eBankit.Presentation.InsertValidateMsg($("#securityImagesList :text"),top.eBankit.Presentation.GetResource("ImageCaptionInvalid")),t=!1):(t=!0,eBankit.Presentation.RemoveValidateMsg($("#securityImagesList :text"),top.eBankit.Presentation.GetResource("ImageCaptionInvalid")))),(n||hdnHasImage.val()!="true")&&(t||hdnHasCaption.val()!="true")?!0:!1};eBankit.Presentation.Register2.ToogleDocumentType=function(n,t){div=$("#"+n);div.show();div.removeClass("hidden");$("#"+t).hide()};eBankit.Presentation.Register2.toDate=function(n){var t=n.split("-");return new Date(t[2],t[1]-1,t[0])};eBankit.Presentation.Register2.SetInitPhoneNumber=function(){txtPhone.val()==""&&txtPhone.val("+351")};TextBoxNewKey.on("keyup",function(){eBankit.Presentation.Register2.ValidateInputsConfirm(TextBoxNewKey[0])});txtPhone.on("blur",function(){eBankit.Presentation.Register2.SetInitPhoneNumber()});$(document).ready(function(){var r=$("[id$=pnUserData]"),u=$("[id$=pnNewKey]"),f=$("[id$=pnSecurityQuestions]"),e=$("[id$=pnSecurityImages]"),o=$("[id$=liSetp1]"),s=$("[id$=liSetp2]"),h=$("[id$=liSetp3]");$(".step").removeClass("step-selected");r.is(":visible")?o.addClass("step-selected"):(u.is(":visible")||f.is(":visible")||e.is(":visible"))&&s.addClass("step-selected");txtPhone.mask("+999 999 999 999 999",{placeholder:"+351 _____ _____ _____"});eBankit.Presentation.Register2.SetInitPhoneNumber();$("#aspnetForm").on("keyup keypress",function(n){var t=n.keyCode||n.which;if(t==13)return n.preventDefault(),!1});var t=$calendPickerDate1.attr("name"),i=$calendPickerDate2.attr("name"),n={debug:!1,rules:{},messages:{},success:function(n){n.addClass("valid")}};n.rules[t]={ValidateDateFormat:!0};n.rules[i]={ValidateDateFormat:!0};n.messages[t]={ValidateDateFormat:function(){return top.eBankit.Presentation.GetResource("dtDataTransferenciaPermErroMsg")}};n.messages[i]={ValidateDateFormat:function(){return top.eBankit.Presentation.GetResource("dtDataTransferenciaPermErroMsg")}}});