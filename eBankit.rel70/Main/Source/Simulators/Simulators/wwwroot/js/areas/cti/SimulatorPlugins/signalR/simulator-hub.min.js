function SimulatorHub(){var n=function(n){var t=(new Date).getTime();console.log("Registering on platform");$.get("/CTI/MediaBarManager/RegisterAuthUser/"+n+"?t="+t,function(n){console.log("user :"+n+" established ")})},t=function(n,t,i){$("#extensionCall").text(n);$("#callToNumber").text(i);$("#interactionid").text(t);$("#modalTittle").text("New Call Incoming");$("#interactionIdCall").val(t);$("#closePopUp").css("display","none");$("#divInformation").css("display","none");$("#answerCallModal")[0].style.display="block"},i=function(n){$("#divExtensionCall").css("display","none");$("#divCallToNumber").css("display","none");$("#closePopUp").css("display","inline-block");$("#answerCall").css("display","none");$("#ignoreCall").css("display","none");$("#interactionid").text(n);$("#modalTittle").text("Call Answered");$("#information").text("Call answered on contact center!");$("#answerCallModal")[0].style.display="block"},r=function(n,t,i){$("#divExtensionCall").css("display","none");$("#divCallToNumber").css("display","none");$("#closePopUp").css("display","inline-block");$("#answerCall").css("display","none");$("#ignoreCall").css("display","none");$("#interactionid").text(i);$("#modalTittle").text("Call Transfer");$("#information").text("Call transfered from extension "+n+" to "+t);$("#answerCallModal")[0].style.display="block"},u=function(n){openGenericMessagePopUp(n)},f=function(){$("#simulatorBodyId").load(document.URL+" #simulatorBodyId")};return{callIncoming:t,updateSimulator:f,callAnswered:i,callTransfered:r,setAuthUser:n,showMessage:u}}const simulatorHubConnection=(new signalR.HubConnectionBuilder).withUrl("/signalr/simulator").withAutomaticReconnect().configureLogging(signalR.LogLevel.Error).build();var simulatorHub=new SimulatorHub;simulatorHubConnection.on("callIncoming",simulatorHub.callIncoming);simulatorHubConnection.on("updateSimulator",simulatorHub.updateSimulator);simulatorHubConnection.on("callAnswered",simulatorHub.callAnswered);simulatorHubConnection.on("transferCall",simulatorHub.callTransfered);simulatorHubConnection.on("setAuthUser",simulatorHub.setAuthUser);simulatorHubConnection.on("showMessage",simulatorHub.showMessage);simulatorHubConnection.onclose(function(n){console.log("Disconnected. Reason: "+n)});simulatorHubConnection.onreconnecting(n=>{console.log('Connection lost due to error "'+n+'". Reconnecting.')});simulatorHubConnection.onreconnected(()=>{console.log("Connection reestablished. Connected.")});$(document).ready(function(){simulatorHubConnection.start().then(function(){console.log("now connected to simulator")}).catch(n=>console.log("could not connect!"+n))});