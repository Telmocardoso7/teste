function MakePaymentTable(n){var u=$("#tbPaymentDetails"),t="",i,r,f;$(".trline").remove("tr");i=$('<td class="title">Payment ID<\/td>');r=$("<td>"+n.paymentId+"<\/td>");t=$('<tr class="trline"><\/tr>');t.append(i);t.append(r);u.append(t);i=$('<td class="title">Client ID<\/td>');r=$("<td>"+n.clientId+"<\/td>");t=$('<tr class="trline"><\/tr>');t.append(i);t.append(r);u.append(t);i=$('<td class="title">Creation date<\/td>');r=$("<td>"+n.createDate+"<\/td>");t=$('<tr class="trline"><\/tr>');t.append(i);t.append(r);u.append(t);f=n.paymentStatus;f=f===2?"SUCCESS":"FAILED";i=$('<td class="title">Payment status<\/td>');r=$("<td>"+f+"<\/td>");t=$('<tr class="trline"><\/tr>');t.append(i);t.append(r);u.append(t);i=$('<td class="title">Source account number<\/td>');r=$("<td>"+n.debtorNumber+"<\/td>");t=$('<tr class="trline"><\/tr>');t.append(i);t.append(r);u.append(t);i=$('<td class="title">Beneficiary account number<\/td>');r=$("<td>"+n.creditorAccount+"<\/td>");t=$('<tr class="trline"><\/tr>');t.append(i);t.append(r);u.append(t);i=$('<td class="title">Beneficiary account name<\/td>');r=$("<td>"+n.creditorName+"<\/td>");t=$('<tr class="trline"><\/tr>');t.append(i);t.append(r);u.append(t);i=$('<td class="title">Amount<\/td>');r=$("<td>"+n.amount+"<\/td>");t=$('<tr class="trline"><\/tr>');t.append(i);t.append(r);u.append(t);i=$('<td class="title">Currency<\/td>');r=$("<td>"+n.currency+"<\/td>");t=$('<tr class="trline"><\/tr>');t.append(i);t.append(r);u.append(t);i=$('<td class="title">Process ID<\/td>');r=$("<td>"+n.processTransactionId+"<\/td>");t=$('<tr class="trline"><\/tr>');t.append(i);t.append(r);u.append(t)}function getCookie(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)===" ";)t=t.substring(1,t.length);if(t.indexOf(r)===0)return t.substring(r.length,t.length)}return null}setTimeout(function(){$.LoadingSpin("show","body",$("#loadingSpin-text").val());$(document).ready(function(){var n=window.location.href;$.post("/TPP/Manager/DecodePayment",{URL:n},function(n){var t=n,i=getCookie("tppToken");$.post("/TPP/Manager/GetPaymentStatus",{paymentID:t,token:i},function(n){var t=n;(t.paymentStatus===2||t.paymentStatus===9)&&(MakePaymentTable(t),$.LoadingSpin("hide","body"))},"json").fail(function(n){Log(n.statusText)})}).fail(function(n){Log(n.statusText)}).always(function(){$.LoadingSpin("hide","body");$("#automaticClose").val().toUpperCase().toLowerCase()==="true"?($("#automaticCloseTxt").removeAttr("hidden"),setTimeout("self.close()",5e3)):$("#manualCloseTxt").removeAttr("hidden")})})},1e3);